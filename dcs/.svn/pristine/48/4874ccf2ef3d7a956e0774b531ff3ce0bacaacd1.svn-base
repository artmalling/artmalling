<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자    : 김영진
 * 회 사 명    : 
 * 작 성 일    : 2010.02.10
 * 변 경 일    : 
 * 변경내용 : 
 * 개      요     :  가맹점 코드관리
 -->
<service name="/dbri101.db">
    <!-- 가맹점정보 List -->
    <gauce name="H_MASTER"> 
        <column colName="BRCH_ID"        colType="TB_STRING"  size="10"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_NAME"      colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_CD"         colType="TB_STRING"  size="2"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_NAME"       colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COMP_NO"        colType="TB_STRING"  size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_PUMMOK_NM"  colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_NAME"      colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_PH"        colType="TB_STRING"  size="14"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_TYPE"      colType="TB_STRING"  size="2"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_TYPE_NM"   colType="TB_STRING"  size="30"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    <!-- 가맹점정보 상세 -->
    <gauce name="H_DETAIL"> 
        <column colName="BRCH_ID"        colType="TB_STRING"  size="10"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_NAME"      colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_CD"         colType="TB_STRING"  size="2"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_TYPE"      colType="TB_STRING"  size="2"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_TYPE_NM"   colType="TB_STRING"  size="30"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SCOMP_YN"       colType="TB_STRING"  size="1"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_NAME"       colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_SSNO"       colType="TB_STRING"  size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COMP_NO"        colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_PH1"       colType="TB_STRING"  size="4"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_PH2"       colType="TB_STRING"  size="4"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_PH3"       colType="TB_STRING"  size="4"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_NAME"      colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_PH1"       colType="TB_STRING"  size="4"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_PH2"       colType="TB_STRING"  size="4"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_PH3"       colType="TB_STRING"  size="4"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_EMAIL1"    colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHAR_EMAIL2"    colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OPEN_DT"        colType="TB_STRING"  size="8"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CAN_DT"         colType="TB_STRING"  size="8"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CAN_REASON"     colType="TB_STRING"  size="400" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_PUMMOK_NM"  colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_BRAND_NM"   colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_STAT"       colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_CAT"        colType="TB_STRING"  size="40"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ZIP_CD1"        colType="TB_STRING"  size="3"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ZIP_CD2"        colType="TB_STRING"  size="3"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_ADDR1"     colType="TB_STRING"  size="200" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_ADDR2"     colType="TB_STRING"  size="200" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FINC_CD"        colType="TB_STRING"  size="10"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BRCH_PAY_DAY"   colType="TB_STRING"  size="2"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SHORT_CD"       colType="TB_STRING"  size="2"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    <!-- 가맹점 정보 리스트 조회 -->
    <query name="SEL_MASTER">        
        <![CDATA[
            SELECT A.BRCH_ID
                 , A.BRCH_NAME 
                 , A.STR_CD
                 , B.STR_NAME 
                 , A.COMP_NO 
                 , A.REP_PUMMOK_NM 
                 , A.CHAR_NAME
                 , A.CHAR_PH1 || '-' || A.CHAR_PH2 || '-' || A.CHAR_PH3 CHAR_PH
                 , A.BRCH_TYPE
                 , C.COMM_NAME1 BRCH_TYPE_NM  
              FROM DCS.DB_BRANCH A 
                 , DPS.PC_STRMST B 
                 , COM.TC_COMMCODE C
             WHERE A.STR_CD    = B.STR_CD
               AND 'D'         = C.SYS_PART
               AND 'D025'      = C.COMM_PART
               AND A.BRCH_TYPE = C.COMM_CODE
               AND A.BRCH_ID    LIKE  ?  || '%'
               AND A.COMP_NO    LIKE  ?  || '%'
               AND A.BRCH_TYPE  LIKE  ?  || '%'  
        ]]>        
    </query>  
    
    <!-- 가맹점 정보 상세 조회 -->
    <query name="SEL_DETAIL">        
        <![CDATA[
            SELECT A.BRCH_ID
                 , A.BRCH_NAME
                 , A.STR_CD
                 , A.BRCH_TYPE
                 , C.COMM_NAME1 BRCH_TYPE_NM
                 , A.SCOMP_YN
                 , A.REP_NAME 
                 , A.REP_SSNO 
                 , A.COMP_NO
                 , A.BRCH_PH1
                 , A.BRCH_PH2
                 , A.BRCH_PH3
                 , A.CHAR_NAME 
                 , A.CHAR_PH1
                 , A.CHAR_PH2 
                 , A.CHAR_PH3
                 , A.CHAR_EMAIL1 
                 , A.CHAR_EMAIL2
                 , A.OPEN_DT
                 , A.CAN_DT
                 , A.CAN_REASON 
                 , A.REP_PUMMOK_NM 
                 , A.REP_BRAND_NM
                 , A.BIZ_STAT 
                 , A.BIZ_CAT
                 , A.ZIP_CD1
                 , A.ZIP_CD2
                 , A.BRCH_ADDR1
                 , A.BRCH_ADDR2
                 , A.FINC_CD
                 , A.BRCH_PAY_DAY
                 , A.SHORT_CD
              FROM DCS.DB_BRANCH A 
                 , COM.TC_COMMCODE C
             WHERE 'D'         = C.SYS_PART
               AND 'D025'      = C.COMM_PART
               AND A.BRCH_TYPE = C.COMM_CODE
               AND A.BRCH_ID   = ?
        ]]>        
    </query>  
    
     <!-- 가맹점 코드 생성 -->
    <query name="GET_BRANCHID">        
        <![CDATA[
            SELECT DCS.F_GET_SQ_BRCH(?) BRCH_ID
               FROM DUAL
        ]]>        
    </query>  
    
    <!-- 가맹점 등록  -->
    <query name="INS_BRANCH">        
        <![CDATA[
            INSERT INTO DCS.DB_BRANCH (
                                       BRCH_ID      
                                     , BRCH_NAME    
                                     , COMP_NO      
                                     , STR_CD       
                                     , SCOMP_YN     
                                     , BRCH_TYPE    
                                     , SHORT_CD
                                     , ZIP_CD1      
                                     , ZIP_CD2       
                                     , BRCH_ADDR1   
                                     , BRCH_ADDR2   
                                     , BRCH_PH1     
                                     , BRCH_PH2     
                                     , BRCH_PH3     
                                     , REP_SSNO     
                                     , REP_NAME     
                                     , REP_PUMMOK_NM
                                     , REP_BRAND_NM 
                                     , BIZ_STAT     
                                     , BIZ_CAT      
                                     , OPEN_DT      
                                     , FINC_CD      
                                     , CAN_DT       
                                     , CAN_REASON   
                                     , BRCH_PAY_DAY 
                                     , CHAR_NAME    
                                     , CHAR_PH1     
                                     , CHAR_PH2     
                                     , CHAR_PH3     
                                     , CHAR_EMAIL1  
                                     , CHAR_EMAIL2  
                                     , REG_DATE     
                                     , REG_ID       
                                     , MOD_DATE     
                                     , MOD_ID       
                                      ) 
                               VALUES (
                                       ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , SYSDATE
                                     , ? 
                                     , SYSDATE
                                     , ?                  
                                     )   
         ]]>   
    </query>  
    
    <!-- 가맹점 정보 수정 -->
    <query name="UPD_BRANCH">
        <![CDATA[
            UPDATE DCS.DB_BRANCH
               SET BRCH_NAME      = ?
                 , COMP_NO        = ?  
                 , STR_CD         = ?
                 , SCOMP_YN       = ?
                 , BRCH_TYPE      = ? 
                 , SHORT_CD       = ? 
                 , ZIP_CD1        = ?
                 , ZIP_CD2        = ?  
                 , BRCH_ADDR1     = ? 
                 , BRCH_ADDR2     = ?  
                 , BRCH_PH1       = ?   
                 , BRCH_PH2       = ?    
                 , BRCH_PH3       = ?    
                 , REP_SSNO       = ?    
                 , REP_NAME       = ?   
                 , REP_PUMMOK_NM  = ?
                 , REP_BRAND_NM   = ?
                 , BIZ_STAT       = ? 
                 , BIZ_CAT        = ?  
                 , OPEN_DT        = ?
                 , FINC_CD        = ?  
                 , CAN_DT         = ?
                 , CAN_REASON     = ? 
                 , BRCH_PAY_DAY   = ?
                 , CHAR_NAME      = ? 
                 , CHAR_PH1       = ?  
                 , CHAR_PH2       = ?  
                 , CHAR_PH3       = ?   
                 , CHAR_EMAIL1    = ?  
                 , CHAR_EMAIL2    = ? 
                 , MOD_ID         = ?
                 , MOD_DATE       = SYSDATE
             WHERE BRCH_ID        = ?
        ]]>
    </query> 

</service>    
              