<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자    : 박래형
 * 회 사 명    : FKSS
 * 작 성 일    : 2010.04.08
 * 변 경 일    : 
 * 변경내용 : 
 * 개    요       :  개발팀에서 기입해주세요
 --> 
<service name="/pord118.po">
    <!-- 입고/반품  리스트 -->
    <gauce name="H_LIST"> 
        <column colName="STR_CD"                  colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG"               colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG_NM"            colType="TB_STRING"   size="20"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="COUNT_SLIP_FLAG"         colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="COST_TAMT"               colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_TAMT"               colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>                                      
                                                  
    <!-- 입고/반품  리스트 -->                           
    <gauce name="H_DETAIL">                       
        <column colName="STR_CD"                  colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_NM"                  colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORD_DT"                  colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG"               colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG_NM"            colType="TB_STRING"   size="20"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_NO"                 colType="TB_STRING"   size="12"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_CD"               colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_NM"               colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_CD"                  colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_NM"                  colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="TQTY"                    colType="TB_DECIMAL"  size="8"    dec="1" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COST_TAMT"               colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SALE_TAMT"           colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_TAMT"           colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_TAMT"               colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_RATE"            colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_PROC_STAT"          colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_PROC_STAT_NM"       colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_FLAG"                colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_TYPE"                colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PAIR_STR_CD"             colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PAIR_SLIP_NO"            colType="TB_STRING"   size="12"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_OWN_FLAG"            colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_TYPE"              colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="AUTO_SLIP_FLAG"          colType="TB_STRING"   size="10"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>   
    
    <!-- 검품현황 조회(매입,반품,점출입,매가인상하) -->
    <gauce name="H_DETAIL1"> 
        <column colName="STR_CD"                  colType="TB_STRING"   size="2"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_NM"                  colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_NO"                 colType="TB_STRING"   size="12"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_SEQ_NO"              colType="TB_DECIMAL"  size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_SRT_CD"           colType="TB_STRING"   size="4"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"               colType="TB_STRING"   size="8"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_NM"               colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"                  colType="TB_STRING"   size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NM"                  colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"                colType="TB_STRING"   size="54"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COLOR_CD"                colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"                 colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_CD"             colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_NM"             colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_QTY"                 colType="TB_DECIMAL"  size="8"    dec="1"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHK_QTY"                 colType="TB_DECIMAL"  size="8"    dec="1"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MG_RATE"                 colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SALE_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SALE_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="N_NEW_SALE_PRC"          colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="N_NEW_SALE_AMT"          colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_RATE"            colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_AMT"             colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_TYPE"                colType="TB_STRING"   size="1"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />        
        <column colName="RATE"                    colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    <!-- 검품현황 조회(대출) -->
    <gauce name="H_DETAIL2"> 
        <column colName="STR_CD"                  colType="TB_STRING"   size="2"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_NM"                  colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_NO"                 colType="TB_STRING"   size="12"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_SEQ_NO"              colType="TB_DECIMAL"  size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_SRT_CD"           colType="TB_STRING"   size="4"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"               colType="TB_STRING"   size="8"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_NM"               colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"                  colType="TB_STRING"   size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NM"                  colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"                colType="TB_STRING"   size="54"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COLOR_CD"                colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"                 colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_CD"             colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_NM"             colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_QTY"                 colType="TB_DECIMAL"  size="8"    dec="1"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHK_QTY"                 colType="TB_DECIMAL"  size="8"    dec="1"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_RATE"            colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_TYPE"                colType="TB_STRING"   size="1"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />      
        <column colName="RATE"                    colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    <!-- 검품현황 조회(대입) -->
    <gauce name="H_DETAIL3"> 
        <column colName="STR_CD"                  colType="TB_STRING"   size="2"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_NM"                  colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_NO"                 colType="TB_STRING"   size="12"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_SEQ_NO"              colType="TB_DECIMAL"  size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_SRT_CD"           colType="TB_STRING"   size="4"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"               colType="TB_STRING"   size="8"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_NM"               colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"                  colType="TB_STRING"   size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NM"                  colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"                colType="TB_STRING"   size="54"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COLOR_CD"                colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"                 colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_CD"             colType="TB_STRING"   size="3"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_NM"             colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_QTY"                 colType="TB_DECIMAL"  size="8"    dec="1"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHK_QTY"                 colType="TB_DECIMAL"  size="8"    dec="1"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_PRC"            colType="TB_DECIMAL"  size="9"    dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_AMT"            colType="TB_DECIMAL"  size="13"   dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_RATE"            colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />      
        <column colName="RATE"                    colType="TB_DECIMAL"  size="5"    dec="2"  keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>    

    <!-- 코드/명 조회 --> 
    <gauce name="H_COMBO">
        <column colName="CODE"                    colType="TB_STRING"   size="2"    dec="0"  keyType="TB_NORMAL" roundMode="" />
        <column colName="NAME"                    colType="TB_STRING"   size="40"   dec="0"  keyType="TB_NORMAL" roundMode="" />
    </gauce>  

    
         <!-- 점코드조회 SQL : 전체  -->
    <query name="SEL_ALLGB_STR">
        <![CDATA[
           SELECT '%'           AS CODE 
                , '전체'        AS NAME 
                , ''            AS GBN
             FROM DUAL
           UNION ALL
        ]]>
    </query>
    
     <!-- 점코드조회 SQL : 전체  -->
    <query name="SEL_ALLGB">
        <![CDATA[
           SELECT '%'           AS CODE 
                , '전체'        AS NAME 
             FROM DUAL
           UNION ALL
        ]]>
    </query>
    
    <!-- 점코드조회 SQL : 권한 적용-->
    <query name="SEL_STORE">
        <![CDATA[
            SELECT DISTINCT 
                   A.STR_CD     AS CODE
                 , DPS.FN_GET_STORE_NAME(A.STR_CD)   AS NAME
                 , STR_FLAG AS GBN
              FROM COM.V_MYORG A, DPS.PC_STRMST B
             WHERE A.STR_CD = B.STR_CD
               AND A.USE_YN = 'Y'
               AND A.FCL_FLAG = '1'
               AND USER_ID = ?
               AND STR_FLAG LIKE ? || '%'
        ]]>
    </query>
    
     <!-- 점코드조회 SQL : 권한 적용 _ 매입, 매장권한 조건-->
    <query name="SEL_STORE_ORG_FLAG">
        <![CDATA[
               AND ORG_FLAG = ?
        ]]>
    </query>
    
    <!-- 점코드조회 SQL : 권한 적용 안함 -->
    <query name="SEL_ALL_STORE">
        <![CDATA[
            SELECT STR_CD     AS CODE
                 , STR_NAME   AS NAME
                 , STR_FLAG AS GBN
              FROM DPS.PC_STRMST
             WHERE FCL_FLAG = '1'
               AND USE_YN = 'Y'
               AND STR_FLAG LIKE ? || '%'
        ]]>
    </query>
    
    <!-- 부문코드조회 SQL : 권한 적용 -->
    <query name="SEL_DEPT">
        <![CDATA[
           SELECT DISTINCT 
                  A.DEPT_CD         AS CODE
                , ORG_SHORT_NAME    AS NAME
             FROM COM.V_MYORG A, DPS.PC_ORGMST B
            WHERE A.STR_CD = B.STR_CD
              AND A.DEPT_CD = B.DEPT_CD
              AND ORG_LEVEL = '2' 
              AND A.USE_YN = 'Y'
              AND USER_ID = ?
              AND A.ORG_FLAG = ?
              AND A.STR_CD = ?
        ]]>
    </query>
    
    <!-- 부문코드조회 SQL : 권한 미 적용-->
    <query name="SEL_ALL_DEPT">
        <![CDATA[
            SELECT DISTINCT DEPT_CD     AS CODE
                 , ORG_SHORT_NAME       AS NAME
              FROM DPS.PC_ORGMST A
              WHERE ORG_LEVEL = '2' 
                AND ORG_FLAG = ?
                AND A.STR_CD = ?
        ]]>
    </query>
    
        <!-- 관리조직 여부 조건 추가-->
    <query name="ADD_MNG_ORG_YN">
        <![CDATA[
                AND MNG_ORG_YN LIKE ? || '%'
        ]]>
    </query>
    
    <!-- 팀코드조회 SQL : 권한 적용 -->
    <query name="SEL_TEAM">
        <![CDATA[
            SELECT DISTINCT 
                  A.TEAM_CD         AS CODE
                , ORG_SHORT_NAME    AS NAME
             FROM COM.V_MYORG A, DPS.PC_ORGMST B
            WHERE A.STR_CD = B.STR_CD
              AND A.DEPT_CD = B.DEPT_CD
              AND A.TEAM_CD = B.TEAM_CD
              AND ORG_LEVEL = '3' 
              AND A.USE_YN = 'Y'
              AND USER_ID = ?
              AND A.ORG_FLAG = ?
              AND A.STR_CD = ?
        ]]>
    </query>
    
    <!-- 팀코드조회 SQL 권한 미적용-->
    <query name="SEL_ALL_TEAM">
        <![CDATA[
            SELECT DISTINCT TEAM_CD      AS CODE 
                 , ORG_SHORT_NAME        AS NAME
              FROM DPS.PC_ORGMST A 
             WHERE ORG_LEVEL = '3' 
               AND ORG_FLAG = ?
               AND A.STR_CD = ?
        ]]>
    </query>
    
    <!-- PC코드조회 SQL : 권한 적용-->
    <query name="SEL_PC">
        <![CDATA[
        SELECT DISTINCT 
               A.PC_CD              AS CODE
             , ORG_SHORT_NAME       AS NAME
          FROM COM.V_MYORG A, DPS.PC_ORGMST B
         WHERE A.STR_CD = B.STR_CD
           AND A.DEPT_CD = B.DEPT_CD
           AND A.TEAM_CD = B.TEAM_CD
           AND A.PC_CD = B.PC_CD
           AND ORG_LEVEL = '4' 
           AND A.USE_YN = 'Y'
           AND USER_ID = ?
           AND A.ORG_FLAG = ?
           AND A.STR_CD = ?
        ]]>
    </query>
    
    <!-- PC코드조회 SQL : 권한 미적용-->
    <query name="SEL_ALL_PC">
        <![CDATA[
        SELECT DISTINCT PC_CD         AS CODE 
             , ORG_SHORT_NAME         AS NAME
          FROM DPS.PC_ORGMST A
         WHERE ORG_LEVEL = '4' 
           AND ORG_FLAG = ?
           AND A.STR_CD = ?
        ]]>
    </query>
    
    <!-- 부문코드조회 SQL 부문 조건-->
    <query name="SEL_CONDI_DEPT">
        <![CDATA[
           AND A.DEPT_CD = ?
        ]]>
    </query>
    
      <!-- 부문코드조회 SQL 부문 조건-->
    <query name="SEL_CONDI_DEPT_LIKE">
        <![CDATA[
           AND A.DEPT_CD LIKE ? || '%'
        ]]>
    </query>
    
    <!-- 부문코드조회 SQL 팀 조건-->
    <query name="SEL_CONDI_TEAM">
        <![CDATA[
           AND A.TEAM_CD = ?
        ]]>
    </query>
    
    <!-- 부문코드조회 SQL 팀 조건-->
    <query name="SEL_CONDI_TEAM_LIKE">
        <![CDATA[
           AND A.TEAM_CD LIKE ? || '%'
        ]]>
    </query>

    
          <!-- 쿼리 시작 SQL -->
    <query name="SEL_STR_HEADER">
        <![CDATA[
        SELECT CODE
             , NAME
             , GBN 
          FROM (
        ]]>
    </query>
    
        <!-- 쿼리 시작 SQL -->
    <query name="SEL_HEADER">
        <![CDATA[
        SELECT CODE
             , NAME
          FROM (
        ]]>
    </query>
    
       <!-- 쿼리 종료 SQL -->
    <query name="SEL_TAIL">
        <![CDATA[
        )
               ORDER BY CODE
        ]]>
    </query>
    
    
    <!-- 전표별 발주현황  마스터 조회 -->
    <query name="SEL_LIST">
        <![CDATA[
        SELECT STR_CD
             , SLIP_FLAG
             , SLIP_FLAG_NM
             , SUM(COUNT_SLIP_FLAG) AS COUNT_SLIP_FLAG
             , SUM(COST_TAMT)       AS COST_TAMT
             , SUM(SALE_TAMT)       AS SALE_TAMT
          FROM ( 
	            SELECT SLP.STR_CD
	                 , SLP.SLIP_FLAG
	                 , COM.FN_GET_COMM_NAME('D', 'P201', SLP.SLIP_FLAG) AS  SLIP_FLAG_NM    /* 전표구분명 */
	                 , COUNT(SLP.SLIP_FLAG) AS COUNT_SLIP_FLAG
	                 , (CASE WHEN SLP.SLIP_FLAG IN('A','D','F','G') THEN 1 
	                                                                    ELSE (-1) 
	                   END)
	                   *
	                   (SUM(DECODE(SLP.SLIP_FLAG, 'G', 0, CASE SLP.SLIP_PROC_STAT WHEN '09' THEN CHK_COST_TAMT 
	                                                                              ELSE SLP.NEW_COST_TAMT 
	                   END )))                                 AS   COST_TAMT       
	                 , (CASE WHEN SLP.SLIP_FLAG IN('A','D','F','G') THEN 1 
                                                                        ELSE (-1) 
                       END)
                       *
	                   (SUM(CASE SLP.SLIP_PROC_STAT WHEN '09' THEN DECODE(SLP.SLIP_FLAG, 'G', SLP.CHK_GAP_SALE_TAMT, SLP.CHK_SALE_TAMT) 
	                                                          ELSE DECODE(SLP.SLIP_FLAG, 'G', SLP.GAP_SALE_TAMT    , SLP.NEW_SALE_TAMT) 
	                   END ))                                 AS   SALE_TAMT
                     , PBN.SALE_ORG_CD
                     , PBN.BUY_ORG_CD
	              FROM DPS.PO_SLPMST SLP
	                 , DPS.PC_STRPBN PBN
	             WHERE SLP.STR_CD         = ?
	               AND PBN.STR_CD = SLP.STR_CD 
	               AND DECODE(?  , '0', SLP.ORD_DT
	                             , '1', SLP.ORD_CF_DT
	                             , '2', SLP.DELI_DT
	                             , '3', SLP.CHK_DT) BETWEEN ? AND ?
	               AND SLP.SLIP_PROC_STAT LIKE ? || '%'
	               AND SLP.PUMBUN_CD      LIKE ? || '%'
	               AND PBN.PUMBUN_CD      = SLP.PUMBUN_CD
	               AND SLP.VEN_CD         LIKE ? || '%'
	               AND SLP.ORD_OWN_FLAG   LIKE ? || '%'
	               AND SLP.DEL_FLAG       = 'N'
	               AND EXISTS ( SELECT MYORG.USER_ID
				                  FROM COM.V_MYORG MYORG
				                 WHERE MYORG.STR_CD      = SLP.STR_CD
				                   AND MYORG.PUMBUN_CD   = SLP.PUMBUN_CD
				                   AND MYORG.USER_ID     = ?
				                   AND ROWNUM            = 1
				                   AND MYORG.ORG_FLAG    = ?
	                           ) 	               
		           GROUP BY SLP.STR_CD
		                  , SLP.SLIP_FLAG
		                  , COM.FN_GET_COMM_NAME('D', 'P201', SLP.SLIP_FLAG)		                  
	                      , PBN.SALE_ORG_CD
	                      , PBN.BUY_ORG_CD
                ) A
        ]]>
    </query> 
     <query name="SEL_BUY_ORG_CD">
        <![CDATA[
               WHERE A.BUY_ORG_CD   LIKE ? || '%'
        ]]>
    </query>
    <query name="SEL_SALE_ORG_CD">
        <![CDATA[
               WHERE A.SALE_ORG_CD  LIKE ? || '%'
        ]]>
    </query>
    <query name="SEL_GROUP">
        <![CDATA[
               GROUP BY A.STR_CD
			       , A.SLIP_FLAG
			       , A.SLIP_FLAG_NM
			ORDER BY A.SLIP_FLAG
        ]]>
    </query>
    
    
    <!-- 전표별 발주현황  디테일 조회-->
    <query name="SEL_DETAIL">
        <![CDATA[
        SELECT STR_CD
			 , STR_NM
			 , ORD_DT
			 , SLIP_FLAG
		  	 , SLIP_FLAG_NM
		 	 , SLIP_NO
		 	 , PUMBUN_CD
			 , PUMBUN_NM
			 , VEN_CD
			 , VEN_NM
			 , TQTY
             , COST_TAMT
             , OLD_SALE_TAMT
			 , NEW_SALE_TAMT
             , SALE_TAMT
			 , NEW_GAP_RATE
			 , SLIP_PROC_STAT
			 , SLIP_PROC_STAT_NM
			 , SKU_FLAG
			 , SKU_TYPE
			 , PAIR_STR_CD
			 , PAIR_SLIP_NO
			 , COM.FN_GET_COMM_NAME('D', 'P202', ORD_OWN_FLAG) AS  ORD_OWN_FLAG
			 , STYLE_TYPE
			 , AUTO_SLIP_FLAG
          FROM (
				SELECT SLP.STR_CD 
				     , SLP.STR_CD   AS STR_NM                  
				     , SLP.ORD_DT 
				     , SLP.SLIP_FLAG 
				     , COM.FN_GET_COMM_NAME('D', 'P201', SLP.SLIP_FLAG) AS  SLIP_FLAG_NM    /* 전표구분명 */ 
				     , SLP.SLIP_NO 
				     , SLP.PUMBUN_CD 
				     , DPS.FN_GET_PUMBUN_NAME(SLP.PUMBUN_CD)            AS PUMBUN_NM 
				     , SLP.VEN_CD 
				     , DPS.FN_GET_VENDOR_NAME(SLP.VEN_CD)               AS VEN_NM      
                     , (CASE WHEN SLP.SLIP_FLAG IN('A','D','F','G') THEN 1 
                                                                        ELSE (-1) 
                       END)
                       *
                       (CASE SLP.SLIP_PROC_STAT WHEN '09' THEN SLP.CHK_TOT_QTY  
                                                          ELSE SLP.ORD_TOT_QTY 
                       END)                               AS   TQTY                                         /* 총수량*/
                     , (CASE WHEN SLP.SLIP_FLAG IN('A','D','F','G') THEN 1 
                                                                        ELSE (-1) 
                       END)
                       *
                       (CASE SLP.SLIP_PROC_STAT WHEN '09' THEN DECODE(SLP.SLIP_FLAG, 'G', 0, CHK_COST_TAMT)  
                                                          ELSE DECODE(SLP.SLIP_FLAG, 'G', 0, SLP.NEW_COST_TAMT)  
                       END)                               AS   COST_TAMT                                   /* 원가합계 */                                            
                     ,(CASE SLP.SLIP_FLAG WHEN 'G' THEN SLP.OLD_SALE_TAMT  
                                                   ELSE 0 
                       END)                               AS   OLD_SALE_TAMT                               /* 구매가합계 */        
                     , (CASE WHEN SLP.SLIP_FLAG IN('A','D','F','G') THEN 1 
                                                                    ELSE (-1) 
                       END)
                       *
                       (CASE SLP.SLIP_PROC_STAT WHEN '09' THEN CHK_SALE_TAMT  
                                                          ELSE SLP.NEW_SALE_TAMT  
                       END)                               AS   NEW_SALE_TAMT                               /* 신매가합계 */    
                     , (CASE WHEN SLP.SLIP_FLAG IN('A','D','F','G') THEN 1 
                                                                    ELSE (-1) 
                       END)
                       *
                       (CASE SLP.SLIP_PROC_STAT WHEN '09' THEN DECODE(SLP.SLIP_FLAG, 'G', SLP.CHK_GAP_SALE_TAMT, SLP.CHK_SALE_TAMT)
                                                          ELSE DECODE(SLP.SLIP_FLAG, 'G', SLP.GAP_SALE_TAMT    , SLP.NEW_SALE_TAMT) 
                       END)                               AS   SALE_TAMT                                   /* 매가합계 */
				     , SLP.NEW_GAP_RATE 
				     , SLP.SLIP_PROC_STAT  
				     , COM.FN_GET_COMM_NAME('D', 'P207', SLP.SLIP_PROC_STAT) AS  SLIP_PROC_STAT_NM         /* 전표진행상태명 */     
	                 , PBM.SKU_FLAG
	                 , PBM.SKU_TYPE    
	                 , SLP.PAIR_STR_CD
	                 , SLP.PAIR_SLIP_NO              
	                 , PBN.SALE_ORG_CD
	                 , PBN.BUY_ORG_CD
	                 , SLP.ORD_OWN_FLAG
	                 , PBN.STYLE_TYPE
	                 , CASE WHEN SLP.AUTO_SLIP_FLAG = '1' THEN '자동전표' ELSE '일반전표' END AUTO_SLIP_FLAG
				  FROM DPS.PO_SLPMST SLP 
				     , DPS.PC_STRPBN PBN 
	                 , DPS.PC_PBNMST PBM
				 WHERE SLP.STR_CD         = ? 
				   AND SLP.PUMBUN_CD      LIKE ? || '%' 
				   AND SLP.VEN_CD         LIKE ? || '%' 
				   AND SLP.ORD_OWN_FLAG   LIKE ? || '%'
				   AND PBN.STR_CD         = SLP.STR_CD                
				   AND PBN.PUMBUN_CD      = SLP.PUMBUN_CD           
	               AND PBN.PUMBUN_CD      = PBM.PUMBUN_CD 
				   AND DECODE(?  , '0', SLP.ORD_DT 
				                 , '1', SLP.ORD_CF_DT 
				                 , '2', SLP.DELI_DT 
				                 , '3', SLP.CHK_DT) BETWEEN ? AND ? 
				   AND SLP.SLIP_PROC_STAT LIKE ? || '%' 
                   AND SLP.DEL_FLAG       = 'N'
	               AND EXISTS ( SELECT MYORG.USER_ID
	                              FROM COM.V_MYORG MYORG
	                             WHERE MYORG.STR_CD      = SLP.STR_CD
	                               AND MYORG.PUMBUN_CD   = SLP.PUMBUN_CD
	                               AND MYORG.USER_ID     = ?
	                               AND ROWNUM            = 1
	                               AND MYORG.ORG_FLAG    = ?
	                           )
	              )A
        ]]>
    </query> 
    
    <query name="SEL_DETAIL_GROUP_BY">
        <![CDATA[      
	        ORDER BY A.ORD_DT DESC, A.SLIP_FLAG
        ]]>
    </query>
    
    
    <!-- 검품현황 디테일 조회 (매입,반품,점출입,매가인상하)-->
    <query name="SEL_DETAIL1">
        <![CDATA[
            SELECT DTL.STR_CD
                 , DPS.FN_GET_STORE_NAME(DTL.STR_CD) AS STR_NM
                 , DTL.SLIP_NO                                                                      --전표번호
                 , DTL.ORD_SEQ_NO                                                                   --전표순번
                 , DTL.PUMMOK_SRT_CD                                                                --단축코드
                 , DTL.PUMMOK_CD                                                                    --품목코드
                 , DPS.FN_GET_PUMMOK_NAME(DTL.PUMMOK_CD) AS  PUMMOK_NM                              --품목명
                 , DTL.SKU_CD                                                                       --단품코드
                 , DPS.FN_GET_SKU_NAME(DTL.SKU_CD) AS SKU_NM                                        --단품명
                 , DTL.STYLE_CD        
                 , DTL.COLOR_CD
                 , DTL.SIZE_CD
                 , DTL.ORD_UNIT_CD                                                                  --단위
                 , COM.FN_GET_COMM_NAME('D', 'P013', DTL.ORD_UNIT_CD) AS ORD_UNIT_NM                --단위명
                 , DTL.ORD_QTY                                                                      --수량
                 , DTL.CHK_QTY                                                                      --검품수량
                 , DTL.MG_RATE                                                                      --마진율
                 , DTL.NEW_COST_PRC                                                                 --원가단가 
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_COST_AMT                          --원가금액
                                                     ELSE DTL.NEW_COST_AMT
                   END      AS NEW_COST_AMT
                 , DTL.NEW_SALE_PRC                                                                 --매가단가
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_SALE_AMT                          --매가금액
                                                     ELSE DTL.NEW_SALE_AMT
                   END      AS NEW_SALE_AMT
                 , DTL.OLD_SALE_PRC                                                                 --구매가단가
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_OLD_SALE_AMT                      --구매가금액
                                                     ELSE DTL.OLD_SALE_AMT
                   END      AS OLD_SALE_AMT
                 , DTL.NEW_SALE_PRC              AS  N_NEW_SALE_PRC                                 --신매가단가
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_SALE_AMT                          --신매가금액
                                                     ELSE DTL.NEW_SALE_AMT
                   END      AS N_NEW_SALE_AMT
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_GAP_RATE                          --차익율
                                                     ELSE DTL.NEW_GAP_RATE
                   END      AS NEW_GAP_RATE
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_GAP_SALE_AMT                      --차익액(매가인상하전표일때만)
                                                     ELSE DTL.GAP_SALE_AMT
                   END      AS NEW_GAP_AMT
                 , PBN.SKU_TYPE                 
                 , DPS.FN_GET_PMKPRFRT(DTL.STR_CD
                                     , MST.NEW_PRC_APP_DT
                                     , MST.BIZ_TYPE
                                     , DTL.PUMMOK_CD
                                     , DTL.SKU_CD)              AS RATE     /* 목표이익율 */
              FROM DPS.PO_SLPDTL    DTL  
                 , DPS.PO_SLPMST    MST
                 , DPS.PC_STRPBN    PBN
             WHERE DTL.STR_CD    = ?               
               AND DTL.STR_CD    = MST.STR_CD
               AND DTL.STR_CD    = PBN.STR_CD
               AND MST.PUMBUN_CD = PBN.PUMBUN_CD
               AND DTL.SLIP_NO   = MST.SLIP_NO
               AND DTL.SLIP_NO   = ?
               AND MST.SLIP_FLAG = ?
        ]]>
    </query> 
    
    <!-- 검품현황 디테일 조회 (대출)-->
    <query name="SEL_DETAIL2">
        <![CDATA[
            SELECT DTL.STR_CD
                 , DPS.FN_GET_STORE_NAME(DTL.STR_CD) AS STR_NM
                 , DTL.SLIP_NO                                                                      --전표번호
                 , DTL.ORD_SEQ_NO                                                                   --전표순번
                 , DTL.PUMMOK_SRT_CD                                                                --단축코드
                 , DTL.PUMMOK_CD                                                                    --품목코드
                 , DPS.FN_GET_PUMMOK_NAME(DTL.PUMMOK_CD) AS  PUMMOK_NM                              --품목명
                 , DTL.SKU_CD                                                                       --단품코드
                 , DPS.FN_GET_SKU_NAME(DTL.SKU_CD) AS SKU_NM                                        --단품명
                 , DTL.STYLE_CD        
                 , DTL.COLOR_CD
                 , DTL.SIZE_CD
                 , DTL.ORD_UNIT_CD                                                                  --단위
                 , COM.FN_GET_COMM_NAME('D', 'P013', DTL.ORD_UNIT_CD) AS ORD_UNIT_NM                --단위명
                 , DTL.ORD_QTY                                                                      --수량
                 , DTL.CHK_QTY                                                                      --검품수량
                 , DTL.NEW_COST_PRC                                                                 --원가단가 
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_COST_AMT                          --원가금액
                                                     ELSE DTL.NEW_COST_AMT
                   END      AS NEW_COST_AMT
                 , DTL.NEW_SALE_PRC                                                                 --매가단가
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_SALE_AMT                          --매가금액
                                                     ELSE DTL.NEW_SALE_AMT
                   END      AS NEW_SALE_AMT
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_GAP_RATE                          --차익율
                                                     ELSE DTL.NEW_GAP_RATE
                   END      AS NEW_GAP_RATE
                 , PBN.SKU_TYPE                 
                 , DPS.FN_GET_PMKPRFRT(DTL.STR_CD
                                     , MST.NEW_PRC_APP_DT
                                     , MST.BIZ_TYPE
                                     , DTL.PUMMOK_CD
                                     , DTL.SKU_CD)              AS RATE     /* 목표이익율 */
              FROM DPS.PO_SLPDTL    DTL  
                 , DPS.PO_SLPMST    MST
                 , DPS.PC_STRPBN    PBN
             WHERE DTL.STR_CD    = ?               
               AND DTL.STR_CD    = MST.STR_CD
               AND DTL.STR_CD    = PBN.STR_CD
               AND MST.PUMBUN_CD = PBN.PUMBUN_CD
               AND DTL.SLIP_NO   = MST.SLIP_NO
               AND DTL.SLIP_NO   = ?
        ]]>
    </query> 
    
    <!-- 검품현황 디테일 조회 (대입)-->
    <query name="SEL_DETAIL3">
        <![CDATA[
            SELECT DTL.STR_CD
                 , DPS.FN_GET_STORE_NAME(DTL.STR_CD) AS STR_NM
                 , DTL.SLIP_NO                                                                      --전표번호
                 , DTL.ORD_SEQ_NO                                                                   --전표순번
                 , DTL.PUMMOK_SRT_CD                                                                --단축코드
                 , DTL.PUMMOK_CD                                                                    --품목코드
                 , DPS.FN_GET_PUMMOK_NAME(DTL.PUMMOK_CD) AS  PUMMOK_NM                              --품목명
                 , DTL.SKU_CD                                                                       --단품코드
                 , DPS.FN_GET_SKU_NAME(DTL.SKU_CD) AS SKU_NM                                        --단품명
                 , DTL.STYLE_CD        
                 , DTL.COLOR_CD
                 , DTL.SIZE_CD
                 , DTL.ORD_UNIT_CD                                                                  --단위
                 , COM.FN_GET_COMM_NAME('D', 'P013', DTL.ORD_UNIT_CD) AS ORD_UNIT_NM                --단위명
                 , DTL.ORD_QTY                                                                      --수량
                 , DTL.CHK_QTY                                                                      --검품수량
                 , DTL.NEW_COST_PRC                                                                 --원가단가 
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_COST_AMT                          --원가금액
                                                     ELSE DTL.NEW_COST_AMT
                   END      AS NEW_COST_AMT
                 , DTL.NEW_SALE_PRC                                                                 --매가단가
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_SALE_AMT                          --매가금액
                                                     ELSE DTL.NEW_SALE_AMT
                   END      AS NEW_SALE_AMT
                 , CASE MST.SLIP_PROC_STAT WHEN '09' THEN DTL.CHK_GAP_RATE                          --차익율
                                                     ELSE DTL.NEW_GAP_RATE
                   END      AS NEW_GAP_RATE
                 , DPS.FN_GET_PMKPRFRT(DTL.STR_CD
                                     , MST.NEW_PRC_APP_DT
                                     , MST.BIZ_TYPE
                                     , DTL.PUMMOK_CD
                                     , DTL.SKU_CD)              AS RATE     /* 목표이익율 */
              FROM DPS.PO_SLPDTL    DTL  
                 , DPS.PO_SLPMST    MST
             WHERE DTL.STR_CD    = MST.STR_CD
               AND DTL.STR_CD    = ?
               AND DTL.SLIP_NO   = MST.SLIP_NO
               AND DTL.SLIP_NO   = ?
        ]]>
    </query>    
    
    
</service>