<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자 : 김경은
 * 회 사 명 : 한국후지쯔
 * 작 성 일 : 2010.02.15
 * 변 경 일 : 
 * 변경내용 :                   
 * 개    요 :  
 -->
<service name="/pord001.po">
	<gauce name="H_MASTER"> 
        <column colName="STR_CD"             colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_NM"             colType="TB_STRING"   size="30"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_NO"            colType="TB_STRING"   size="11"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_SEQ_NO"         colType="TB_STRING"      size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"          colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"             colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NM"             colType="TB_STRING"   size="40"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_CD"        colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_NM"        colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_AMT"        colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_RATE"       colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_STK_QTY"        colType="TB_INT"      size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="AVG_SALE_QTY"       colType="TB_INT"      size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="AVG_SALE_AMT"       colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_QTY"            colType="TB_INT"      size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_PRC"       colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_AMT"       colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_PRC"       colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_AMT"       colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"          colType="TB_STRING"   size="6"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_CD"             colType="TB_STRING"   size="6"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_FLAG"          colType="TB_STRING"   size="1"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MG_RATE"            colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORG_SKU_CD"         colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VAT_AMT"            colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BOTTLE_CD"          colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_TYPE"           colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COST_ZERO"          colType="TB_STRING"   size="1"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_ZERO"          colType="TB_STRING"   size="1"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    <gauce name="H_FILE"> 
        <column colName="STR_CD"             colType="TB_STRING"    size="2"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_NO"            colType="TB_STRING"   size="11"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_SEQ_NO"         colType="TB_INT"      size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FILE_NAME"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="O_FILE_NAME"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FILE_COMMENT"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FILE_PATH"          colType="TB_URL"      size="200"  dec="0"  keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REG_DATE"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REG_ID"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MOD_DATE"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MOD_ID"            colType="TB_STRING"   size="100"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    
    <query name="SEL_MASTER">
        <![CDATA[
            SELECT DTL.STR_CD                                                                                  /* 점 */
			     ,DPS.FN_GET_STORE_NAME(DTL.STR_CD) AS STR_NM
			     , DTL.SLIP_NO                                                                                 /* 전표번호 */
			     , DTL.ORD_SEQ_NO                                                                              /* 전표상세번호 */
			     , DTL.PUMMOK_CD                                                                               /* 품목코드 */
			     , DTL.SKU_CD                                                                                  /* 단품코드 */
			     , DPS.FN_GET_SKU_NAME(DTL.SKU_CD) AS SKU_NM                                                   /* 단품명 */
			     , DTL.ORD_UNIT_CD                                                                             /* 발주단위 */
			     , COM.FN_GET_COMM_NAME('D', 'P013', DTL.ORD_UNIT_CD) AS ORD_UNIT_NM                           /* 발주단위명 */
			     , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_GAP_AMT, DTL.NEW_GAP_AMT) AS NEW_GAP_AMT           /* 신차익액 */
                 , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_GAP_RATE, DTL.NEW_GAP_RATE) AS NEW_GAP_RATE        /* 신차익율 */
			     , DTL.ORD_STK_QTY                                                                             /* 발주시점재고 */
			     , DTL.AVG_SALE_QTY                                                                            /* 일평균판매량 */
			     , DTL.AVG_SALE_AMT                                                                            /* 일평균판매금액 */
			     , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_QTY, DTL.ORD_QTY) AS ORD_QTY                       /* 발주수량 */
			     , DTL.NEW_COST_PRC                                                                            /* 신원가단가 */
			     , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_COST_AMT, DTL.NEW_COST_AMT) AS NEW_COST_AMT        /* 신원가금액 */
			     , DTL.NEW_SALE_PRC                                                                            /* 신매가단가 */
			     , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_SALE_AMT, DTL.NEW_SALE_AMT) AS NEW_SALE_AMT        /* 신매가금액 */
			     , DTL.PUMBUN_CD                                                                               /* 품번코드 */
			     , DTL.VEN_CD                                                                                  /* 협력사코드 */
			     , DTL.SLIP_FLAG                                                                               /* 전표구분 */
			     , DTL.MG_RATE                                                                                 /* 마진율 */
			     , DTL.SKU_CD AS ORG_SKU_CD                                                                    /* 이전단품코드  */
			     , VAT_AMT                                                                                     /* 부가세  */
			     , '' AS BOTTLE_CD                                                                             /* 공병단품번호 */
			     , MST.BIZ_TYPE
			     , DECODE(NVL(DTL.NEW_COST_PRC, 0), 0, 'Y', 'N')      AS COST_ZERO
                 , DECODE(NVL(DTL.NEW_SALE_PRC, 0), 0, 'Y', 'N')      AS SALE_ZERO                    
			  FROM DPS.PO_SLPDTL DTL
                 , DPS.PO_SLPMST MST
             WHERE DTL.STR_CD  = MST.STR_CD
               AND DTL.SLIP_NO = MST.SLIP_NO
               AND DTL.STR_CD  = ?
               AND DTL.SLIP_NO = ?
        ]]>
    </query> 
    
     <query name="SEL_FILE">
        <![CDATA[
            SELECT STR_CD               AS STR_CD
                     ,SLIP_NO           AS SLIP_NO
                     ,ORD_SEQ_NO        AS ORD_SEQ_NO
                     ,FILE_NAME         AS FILE_NAME
                     ,O_FILE_NAME       AS O_FILE_NAME
                     ,FILE_COMMENT      AS FILE_COMMENT
                     , ''                                        AS FILE_PATH
                     ,REG_DATE          AS REG_DATE
                     ,REG_ID            AS REG_ID
                     ,MOD_DATE          AS MOD_DATE
                     ,MOD_ID            AS MOD_ID
               FROM DPS.PO_SLPDTL_FILE
               WHERE STR_CD     = ?
                 AND SLIP_NO    = ?
                 AND ORD_SEQ_NO = ?
        ]]>
    </query> 
    
    <query name="INS_SLIPDTLFILE">
        <![CDATA[
        	INSERT INTO DPS.PO_SLPDTL_FILE (
	        								  STR_CD           
						                     ,SLIP_NO          
						                     ,ORD_SEQ_NO       
						                     ,FILE_NAME        
						                     ,O_FILE_NAME      
						                     ,FILE_COMMENT     
						                     ,REG_DATE         
						                     ,REG_ID           
						                     ,MOD_DATE         
						                     ,MOD_ID           
        							  		)
		        						VALUES
		        						(
		        							 ?
		        							,?
		        							,?
		        							,?
		        							,?
		        							,?
		        							,SYSDATE
		        							,?
		        							,SYSDATE
		        							,?
		        						)
        						
        					
         ]]>
    </query>   
    
    
    <query name="UPD_SLIPDTLFILE">
        <![CDATA[
        	 UPDATE DPS.PO_SLPDTL_FILE
              SET FILE_COMMENT = ?                                                            
                , MOD_DATE = SYSDATE
                , MOD_ID = ?         
            WHERE STR_CD = ?
              AND SLIP_NO = ?
              AND ORD_SEQ_NO = ?
              AND FILE_NAME = ?
         ]]>
    </query>   
    
    <query name="DEL_SLIPDTLFILE">
        <![CDATA[
        	 DELETE FROM  DPS.PO_SLPDTL_FILE
             WHERE STR_CD = ?
              AND SLIP_NO = ?
              AND ORD_SEQ_NO = ?
              AND FILE_NAME = ?
         ]]>
    </query>   
    
</service>