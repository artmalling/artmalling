<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자 : 정진영
 * 회 사 명 : FKSS
 * 작 성 일 : 2010.03.15
 * 변 경 일 : 
 * 변경내용 : 
 * 개    요 :  의류담품코드(A)를 관리한다.
 -->
<service name="/pcod503.pc">
    <!-- 스타일 그리드 -->
    <gauce name="H_SEL_STYLEMST">
        <column colName="PUMBUN_CD"          colType="TB_STRING"  size="6"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="PUMBUN_NAME"        colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="REP_PUMBUN_NAME"    colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="VEN_NAME"           colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="STYLE_CD"           colType="TB_STRING"  size="54"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="STYLE_NAME"         colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="RECP_NAME"          colType="TB_STRING"  size="20"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="PUMMOK_CD"          colType="TB_STRING"  size="8"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="BRAND_CD"           colType="TB_STRING"  size="5"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="BRAND_NAME"         colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="SUB_BRD_CD"         colType="TB_STRING"  size="2"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="PLAN_YEAR"          colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="SEASON_CD"          colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="ITEM_CD"            colType="TB_STRING"  size="2"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="SIZE_TYPE"          colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="SEX_CD"             colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="CURRENCY_CD"        colType="TB_STRING"  size="3"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="ORIGIN_AREA_CD"     colType="TB_STRING"  size="3"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="ORIGIN_AREA_NAME"   colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="VEN_STYLE_CD"       colType="TB_STRING"  size="24"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="SALE_UNIT_CD"       colType="TB_STRING"  size="3"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="BAS_SPEC_CD"        colType="TB_DECIMAL" size="8"   dec="2"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="BAS_SPEC_UNIT"      colType="TB_STRING"  size="3"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="CMP_SPEC_CD"        colType="TB_DECIMAL" size="5"   dec="2"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="CMP_SPEC_UNIT"      colType="TB_STRING"  size="3"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="MAKER_CD"           colType="TB_STRING"  size="6"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="MAKER_NAME"         colType="TB_STRING"  size="40"  dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="USE_YN"             colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="REMARK"             colType="TB_STRING"  size="100" dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="PUMBUN_TYPE"        colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="BIZ_TYPE"           colType="TB_STRING"  size="2"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="STYLE_TYPE"         colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="TAX_FLAG"           colType="TB_STRING"  size="1"   dec="0"  keyType="TB_NORMAL"  roundMode="ROUND" />
    </gauce>
    <!-- 단품 그리드 -->
    <gauce name="H_SEL_SKUMST">
        <column colName="COLOR_CD"        colType="TB_STRING"  size="3"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"         colType="TB_STRING"  size="3"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"          colType="TB_STRING"  size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INPUT_PLU_CD"    colType="TB_STRING"  size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_TYPE"     colType="TB_STRING"  size="1"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PLU_FLAG"        colType="TB_STRING"  size="1"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"       colType="TB_STRING"  size="6"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"        colType="TB_STRING"  size="54"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    <!-- 점별단품 그리드 -->
    <gauce name="H_SEL_STRSTYLEMST">
        <column colName="SEL"             colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_CD"          colType="TB_STRING"  size="2"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"        colType="TB_STRING"  size="54" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SAL_COST_PRC"    colType="TB_INT"     size="9"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_PRC"        colType="TB_INT"     size="9"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_MG_RATE"    colType="TB_DECIMAL" size="5"  dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PBN_ADV_ORD_YN"  colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ADV_ORD_YN"      colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_S_DT"       colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_E_DT"       colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUY_S_DT"        colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUY_E_DT"        colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="USE_YN"          colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ROUND_FLAG"      colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LOW_MG_RATE"     colType="TB_DECIMAL" size="5"  dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_TYPE"        colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    <!-- 단품상세 그리드 -->
    <gauce name="H_SEL_STRSKUMST">
        <column colName="COLOR_CD"       colType="TB_STRING"  size="3"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"        colType="TB_STRING"  size="3"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"         colType="TB_STRING"  size="13" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_CD"         colType="TB_STRING"  size="2"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_CD"         colType="TB_STRING"  size="6"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LOW_ORD_QTY"    colType="TB_INT"     size="7"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OTM_STK_QTY"    colType="TB_INT"     size="7"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LEAD_TIME"      colType="TB_INT"     size="7"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SAL_COST_PRC"   colType="TB_INT"     size="9"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_PRC"       colType="TB_INT"     size="9"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_MG_RATE"   colType="TB_DECIMAL" size="5"  dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ADV_ORD_YN"     colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_S_DT"      colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_E_DT"      colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUY_S_DT"       colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUY_E_DT"       colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="USE_YN"         colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"       colType="TB_STRING"  size="54" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NAME"       colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="RECP_NAME"      colType="TB_STRING"  size="20" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_TYPE"    colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"      colType="TB_STRING"  size="6"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_TYPE"       colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_TYPE"     colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FLAG"           colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LOW_MG_RATE"    colType="TB_DECIMAL" size="5"  dec="2" keyType="TB_NORMAL" roundMode="ROUND" />   
        <column colName="BIZ_TYPE"       colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />       
    </gauce> 
    <!-- 쿼리는 전부 대문자 -->
    <!-- 스타일 마스터 조회 -->
    <query name="SEL_STYLEMST">    
        <![CDATA[
            SELECT STM.PUMBUN_CD     , PBN.PUMBUN_NAME           , REPPBN.PUMBUN_NAME AS REP_PUMBUN_NAME , VEN.VEN_NAME                    , STM.STYLE_CD
                 , STM.STYLE_NAME    , STM.RECP_NAME             , STM.PUMMOK_CD                         , STM.BRAND_CD                    , BRDNM.BRAND_NM AS BRAND_NAME
                 , STM.SUB_BRD_CD    , STM.PLAN_YEAR             , STM.SEASON_CD                         , STM.ITEM_CD                     , STM.SIZE_TYPE
                 , STM.SEX_CD        , STM.CURRENCY_CD           , STM.ORIGIN_AREA_CD                    , ORGNNM.NAME AS ORIGIN_AREA_NAME , STM.VEN_STYLE_CD
                 , STM.SALE_UNIT_CD  , STM.BAS_SPEC_CD           , STM.BAS_SPEC_UNIT                     , STM.CMP_SPEC_CD                 , STM.CMP_SPEC_UNIT
                 , STM.MAKER_CD      , MKRNM.NAME AS MAKER_NAME  , STM.USE_YN                            , STM.REMARK                      , PBN.PUMBUN_TYPE
                 , PBN.BIZ_TYPE      , PBN.STYLE_TYPE            , PBN.TAX_FLAG
              FROM DPS.PC_STYLEMST STM
                 , DPS.PC_PBNMST   PBN
                 , DPS.PC_PBNMST   REPPBN
                 , DPS.PC_VENMST   VEN
                 , DPS.PC_BRDMST   BRDNM
                 , (SELECT COMM_CODE  AS CODE
                         , COMM_NAME1 AS NAME
                      FROM COM.TC_COMMCODE
                     WHERE SYS_PART  = 'D'
                       AND COMM_PART = 'P040'
                       AND USE_YN    = 'Y'
                   ) ORGNNM
                 , (SELECT COMM_CODE  AS CODE
                         , COMM_NAME1 AS NAME
                      FROM COM.TC_COMMCODE
                     WHERE SYS_PART  = 'D'
                       AND COMM_PART = 'P019'
                       AND USE_YN    = 'Y'
                   ) MKRNM
             WHERE STM.PUMBUN_CD      = PBN.PUMBUN_CD
               AND PBN.REP_PUMBUN_CD  = REPPBN.PUMBUN_CD
               AND PBN.VEN_CD         = VEN.VEN_CD
               AND STM.BRAND_CD       = BRDNM.BRAND_CD(+)
               AND STM.ORIGIN_AREA_CD = ORGNNM.CODE(+)
               AND STM.MAKER_CD       = MKRNM.CODE(+)
               AND STM.STYLE_TYPE     = '1'
               AND STM.PUMBUN_CD      = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_PUMMOK_CD">
        <![CDATA[
               AND STM.PUMMOK_CD     = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_STYLE_CD">
        <![CDATA[
               AND STM.STYLE_CD      LIKE ?||'%' 
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_STYLE_NAME">
        <![CDATA[
               AND STM.STYLE_NAME    LIKE '%'||?||'%'      
        ]]>  
    </query>
    <query name="SEL_STYLEMST_WHERE_BRAND_CD">
        <![CDATA[
               AND STM.BRAND_CD      = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_SUB_BRD_CD">
        <![CDATA[
               AND STM.SUB_BRD_CD    = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_PLAN_YEAR">
        <![CDATA[
               AND STM.PLAN_YEAR     = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_SEASON_CD">
        <![CDATA[
               AND STM.SEASON_CD     = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_ITEM_CD">
        <![CDATA[
               AND STM.ITEM_CD       = ?
        ]]>
    </query>
    <query name="SEL_STYLEMST_WHERE_USE_YN">
        <![CDATA[
               AND STM.USE_YN    LIKE '%'||?||'%'    
        ]]>    
    </query>
    <query name="SEL_STYLEMST_ORDER">
        <![CDATA[
             ORDER BY STM.STYLE_CD
        ]]>
    </query>
    <!-- 단품코드 조회   -->
    <query name="SEL_SKUMST">
        <![CDATA[
            SELECT COLOR_CD
                 , SIZE_CD
                 , SKU_CD
                 , INPUT_PLU_CD
                 , PUMBUN_TYPE
                 , PLU_FLAG
                 , PUMBUN_CD
                 , STYLE_CD
              FROM DPS.PC_SKUMST
             WHERE PUMBUN_CD = ? 
               AND STYLE_CD  = ?
             ORDER BY SKU_CD
        ]]>
    </query>
    <!-- 점별스타일 조회   -->
    <query name="SEL_STRSTYLE">
        <![CDATA[
            SELECT DISTINCT
                   CASE WHEN SSM.STYLE_CD IS NULL THEN 'F' ELSE 'T' END   AS SEL
                 , SPS.STR_CD
                 , SSM.STYLE_CD
                 , SSM.SAL_COST_PRC
                 , SSM.SALE_PRC
                 , SSM.SALE_MG_RATE
                 , NVL(SPS.ADV_ORD_YN, 'N')                        AS PBN_ADV_ORD_YN
                 , NVL(SSM.ADV_ORD_YN, NVL(SPS.ADV_ORD_YN,'N'))    AS ADV_ORD_YN
                 , NVL(SSM.SALE_S_DT,TO_CHAR(SYSDATE,'YYYYMMDD'))  AS SALE_S_DT
                 , NVL(SSM.SALE_E_DT,'99991231')                   AS SALE_E_DT
                 , NVL(SSM.BUY_S_DT,TO_CHAR(SYSDATE,'YYYYMMDD'))   AS BUY_S_DT
                 , NVL(SSM.BUY_E_DT,'99991231')                    AS BUY_E_DT
                 , NVL(SSM.USE_YN,'Y')                             AS USE_YN
                 , SPS.RUND_FLAG
                 , SPS.LOW_MG_RATE
                 , SPS.BIZ_TYPE
              FROM (SELECT SKU.COLOR_CD
                         , SKU.SIZE_CD
                         , SKU.SKU_CD
                         , SPN.STR_CD
                         , SPN.ADV_ORD_YN
                         , VEN.RUND_FLAG
                         , SPN.LOW_MG_RATE
                         , SPN.BIZ_TYPE
                      FROM DPS.PC_SKUMST    SKU
                         , DPS.PC_STRPBN    SPN
                         , DPS.PC_STRVENMST VEN
                     WHERE SKU.PUMBUN_CD = SPN.PUMBUN_CD
                       AND SPN.STR_CD    = VEN.STR_CD
                       AND SPN.VEN_CD    = VEN.VEN_CD
                       AND SKU.PUMBUN_CD = ?
                       AND SKU.STYLE_CD  = ?
                   ) SPS
                 , DPS.PC_STRSKUMST SSM
             WHERE SPS.STR_CD = SSM.STR_CD(+)
               AND SPS.SKU_CD = SSM.SKU_CD(+)
             ORDER BY STR_CD
        ]]>
    </query>
    <!-- 점별단품 조회   -->
    <query name="SEL_STRSKUMST">
        <![CDATA[
            SELECT SPS.COLOR_CD
                 , SPS.SIZE_CD
                 , SPS.SKU_CD
                 , SPS.STR_CD
                 , NVL(SSM.VEN_CD,SPS.VEN_CD)                      AS VEN_CD
                 , SSM.LOW_ORD_QTY
                 , SSM.OTM_STK_QTY
                 , SSM.LEAD_TIME
                 , SSM.SAL_COST_PRC
                 , SSM.SALE_PRC
                 , SSM.SALE_MG_RATE
                 , NVL(SSM.ADV_ORD_YN, NVL(SPS.ADV_ORD_YN,'N'))    AS ADV_ORD_YN
                 , NVL(SSM.SALE_S_DT,TO_CHAR(SYSDATE+1,'YYYYMMDD'))  AS SALE_S_DT
                 , NVL(SSM.SALE_E_DT,'99991231')                   AS SALE_E_DT
                 , NVL(SSM.BUY_S_DT,TO_CHAR(SYSDATE+1,'YYYYMMDD'))   AS BUY_S_DT
                 , NVL(SSM.BUY_E_DT,'99991231')                    AS BUY_E_DT
                 , NVL(SSM.USE_YN,'Y')                             AS USE_YN
                 , SPS.STYLE_CD
                 , SPS.SKU_NAME
                 , SPS.RECP_NAME
                 , SPS.PUMBUN_TYPE
                 , SPS.PUMBUN_CD
                 , SPS.SKU_TYPE
                 , SPS.STYLE_TYPE
                 , CASE WHEN SSM.SKU_CD IS NULL THEN '0' ELSE '1' END AS FLAG
                 , SPS.LOW_MG_RATE
                 , SPS.BIZ_TYPE
              FROM (SELECT SKU.COLOR_CD
                         , SKU.SIZE_CD
                         , SKU.SKU_CD
                         , SPN.STR_CD
                         , SPN.VEN_CD
                         , SPN.ADV_ORD_YN
                         , SKU.SKU_NAME
                         , SKU.RECP_NAME
                         , SKU.PUMBUN_TYPE
                         , SKU.PUMBUN_CD
                         , SKU.SKU_TYPE
                         , SKU.STYLE_TYPE
                         , SKU.STYLE_CD
                         , SPN.LOW_MG_RATE
                         , SPN.BIZ_TYPE
                      FROM DPS.PC_SKUMST    SKU
                         , DPS.PC_STRPBN    SPN
                     WHERE SKU.PUMBUN_CD = SPN.PUMBUN_CD
                       AND SKU.PUMBUN_CD = ?
                       AND SKU.STYLE_CD  = ?
                   ) SPS
                 , DPS.PC_STRSKUMST SSM
             WHERE SPS.STR_CD = SSM.STR_CD(+)
               AND SPS.SKU_CD = SSM.SKU_CD(+)
             ORDER BY SPS.STR_CD, SPS.SKU_CD
        ]]>
    </query>
    <!-- 단품  마스터 신규 코드 생성  -->
    <query name="SEL_SKUMST_NEW_CD">
        <![CDATA[
            SELECT '27'||TO_CHAR(SYSDATE,'YY')||LPAD(DPS.SQ_PCSKU27.NEXTVAL,8,'0') AS NEW_SKU_CD
              FROM DUAL
        ]]>
    </query>
    <!-- 단품  마스터 중복체크  -->
    <query name="SEL_SKUMST_SKU_CD_CNT">
        <![CDATA[
            SELECT COUNT(*)  AS CNT
              FROM DPS.PC_SKUMST
             WHERE SKU_CD = ?
               AND ROWNUM = 1
        ]]>
    </query>
    <!-- 바코드  마스터 중복체크  -->
    <query name="SEL_BARCDMST_BAR_CODE_CNT">
        <![CDATA[
        SELECT COUNT(*)  AS CNT
          FROM DPS.PC_BARCDMST
         WHERE BARCODE = ?
           AND SKU_CD != ?
           AND ROWNUM  = 1
        ]]>
    </query>
    <!-- 스타일 신규 조회순서 조회  -->
    <query name="SEL_STYLEMST_NEW_SEQ_NO">
        <![CDATA[
            SELECT LPAD(NVL(MAX(SEQ_NO)+1,1),3,'0') AS NEW_SEQ_NO        
              FROM DPS.PC_STYLEMST
             WHERE PUMBUN_CD  = ?
               AND BRAND_CD   = ?
               AND SUB_BRD_CD = ?
               AND PLAN_YEAR  = ?
               AND SEASON_CD  = ?
               AND ITEM_CD    = ?
        ]]>
    </query>
    <!-- 스타일  마스터 신규 입력  -->
    <query name="INS_STYLEMST">
        <![CDATA[
            INSERT INTO DPS.PC_STYLEMST(PUMBUN_CD
                                      , STYLE_CD
                                      , STYLE_NAME
                                      , RECP_NAME
                                      , PUMMOK_CD
                                      , BRAND_CD
                                      , SUB_BRD_CD
                                      , PLAN_YEAR
                                      , SEASON_CD
                                      , ITEM_CD
                                      , SEQ_NO
                                      , SIZE_TYPE
                                      , MAKER_CD
                                      , SEX_CD
                                      , CURRENCY_CD
                                      , ORIGIN_AREA_CD
                                      , VEN_STYLE_CD
                                      , STYLE_TYPE
                                      , SALE_UNIT_CD
                                      , BAS_SPEC_CD
                                      , BAS_SPEC_UNIT
                                      , CMP_SPEC_CD
                                      , CMP_SPEC_UNIT
                                      , REMARK
                                      , USE_YN
                                      , REG_DATE
                                      , REG_ID
                                      , MOD_DATE
                                      , MOD_ID
                                       )
                                 VALUES(? 
                                      , ?     
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?   
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , '1'    
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , ?      
                                      , SYSDATE
                                      , ?      
                                      , SYSDATE
                                      , ?      
                                       )
        ]]>
    </query>
    <!-- 스타일  마스터 수정 입력  -->
    <query name="UPD_STYLEMST">
        <![CDATA[
            UPDATE DPS.PC_STYLEMST                   
               SET STYLE_NAME     = ?
                 , RECP_NAME      = ?
                 , PUMMOK_CD      = ?
                 , BRAND_CD       = ?
                 , SUB_BRD_CD     = ?
                 , PLAN_YEAR      = ?
                 , SEASON_CD      = ?
                 , ITEM_CD        = ?
                 , SIZE_TYPE      = ?
                 , MAKER_CD       = ?
                 , SEX_CD         = ?
                 , CURRENCY_CD    = ?
                 , ORIGIN_AREA_CD = ?
                 , VEN_STYLE_CD   = ?
                 , SALE_UNIT_CD   = ?
                 , BAS_SPEC_CD    = ?
                 , BAS_SPEC_UNIT  = ?
                 , CMP_SPEC_CD    = ?
                 , CMP_SPEC_UNIT  = ?
                 , REMARK         = ?
                 , USE_YN         = ?
                 , MOD_DATE       = SYSDATE
                 , MOD_ID         = ?
             WHERE PUMBUN_CD      = ?
               AND STYLE_CD       = ?
        ]]>
    </query>
    <!-- 단품  마스터 신규 입력  -->
    <query name="INS_SKUMST">
        <![CDATA[
            INSERT INTO DPS.PC_SKUMST(COLOR_CD
                                    , SIZE_CD
                                    , SKU_CD
                                    , INPUT_PLU_CD
                                    , SKU_NAME
                                    , RECP_NAME
                                    , PUMBUN_TYPE
                                    , PUMBUN_CD
                                    , PUMMOK_CD
                                    , SKU_TYPE
                                    , STYLE_TYPE
                                    , PLU_FLAG
                                    , MODEL_NO
                                    , SALE_UNIT_CD
                                    , BAS_SPEC_CD
                                    , BAS_SPEC_UNIT
                                    , CMP_SPEC_CD
                                    , CMP_SPEC_UNIT
                                    , ORIGIN_AREA_CD
                                    , MAKER_CD
                                    , SET_YN
                                    , GIFT_FLAG
                                    , GIFT_TYPE_CD
                                    , GIFT_AMT_TYPE
                                    , REMARK
                                    , STYLE_CD
                                    , BOTTLE_CD
                                    , USE_YN     
                                    , REG_DATE      
                                    , REG_ID        
                                    , MOD_DATE      
                                    , MOD_ID        
                                     )
                               SELECT ?  AS COLOR_CD
                                    , ?  AS SIZE_CD
                                    , ?  AS SKU_CD
                                    , ?  AS INPUT_PLU_CD
                                    , SUBSTRB(STYLE_NAME,0,30)||' '||?||'/'||SUBSTRB(COM.FN_GET_COMM_NAME('D','P026',?),0,4) AS SKU_NAME
                                    , RECP_NAME
                                    , ?  AS PUMBUN_TYPE
                                    , PUMBUN_CD
                                    , PUMMOK_CD
                                    , '3' AS SKU_TYPE
                                    , '1' AS STYLE_TYPE
                                    , ?   AS PLU_FLAG
                                    , VEN_STYLE_CD
                                    , SALE_UNIT_CD
                                    , BAS_SPEC_CD
                                    , BAS_SPEC_UNIT
                                    , CMP_SPEC_CD
                                    , CMP_SPEC_UNIT
                                    , ORIGIN_AREA_CD
                                    , MAKER_CD
                                    , 'N'  AS SET_YN
                                    , '0'  AS GIFT_FLAG
                                    , NULL AS GIFT_TYPE_CD
                                    , NULL AS GIFT_AMT_TYPE
                                    , REMARK
                                    , STYLE_CD
                                    , NULL AS BOTTLE_CD
                                    , USE_YN     
                                    , SYSDATE AS REG_DATE     
                                    , ?       AS REG_ID
                                    , SYSDATE AS MOD_DATE     
                                    , ?       AS MOD_ID
                                 FROM DPS.PC_STYLEMST
                                WHERE PUMBUN_CD = ?
                                  AND STYLE_CD  = ?
        ]]>
    </query>
    
    <!-- 단품  마스터 수정 입력  -->
    <query name="UPD_SKUMST">
        <![CDATA[
            UPDATE DPS.PC_SKUMST
               SET SKU_NAME         = SUBSTRB(?,0,30)||' '||COLOR_CD||'/'||SUBSTRB(COM.FN_GET_COMM_NAME('D','P026',SIZE_CD),0,4)
                 , RECP_NAME        = ?
                 , PUMBUN_TYPE      = ?  
                 , PUMMOK_CD        = ?   
                 , MODEL_NO         = ?
                 , SALE_UNIT_CD     = ?
                 , CMP_SPEC_CD      = ?
                 , CMP_SPEC_UNIT    = ?
                 , BAS_SPEC_CD      = ?
                 , BAS_SPEC_UNIT    = ?
                 , ORIGIN_AREA_CD   = ?
                 , MAKER_CD         = ?
                 , REMARK           = ?
                 , USE_YN           = ?
                 , MOD_DATE         = SYSDATE
                 , MOD_ID           = ?
             WHERE PUMBUN_CD        = ?   
               AND STYLE_CD         = ?
        ]]>
    </query>   
    
    <!-- 점별단품 신규 입력  -->
    <query name="INS_STRSKUMST">
        <![CDATA[
            INSERT INTO DPS.PC_STRSKUMST(STR_CD        
                                       , SKU_CD        
                                       , SKU_NAME  
                                       , VEN_CD    
                                       , RECP_NAME     
                                       , PUMBUN_TYPE   
                                       , PUMBUN_CD     
                                       , SKU_TYPE      
                                       , STYLE_TYPE
                                       , STYLE_CD
                                       , COLOR_CD
                                       , SIZE_CD
                                       , SAL_COST_PRC
                                       , SALE_PRC
                                       , SALE_MG_RATE
                                       , ADV_ORD_YN
                                       , LOW_ORD_QTY
                                       , OTM_STK_QTY
                                       , LEAD_TIME
                                       , SALE_S_DT     
                                       , SALE_E_DT     
                                       , BUY_S_DT      
                                       , BUY_E_DT      
                                       , USE_YN
                                       , REG_DATE
                                       , REG_ID
                                       , MOD_DATE
                                       , MOD_ID
                                        )
                                  VALUES(?        
                                       , ?        
                                       , ?        
                                       , ?      
                                       , ?     
                                       , ?   
                                       , ?     
                                       , ?      
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?
                                       , ?     
                                       , ?     
                                       , ?      
                                       , ?      
                                       , ?
                                       , SYSDATE
                                       , ?
                                       , SYSDATE
                                       , ?
                                        )
        ]]>
    </query>
    
    <!-- 소스마킹코드 신규 입력  -->
    <query name="INS_BARCDMST">
        <![CDATA[
            INSERT INTO DPS.PC_BARCDMST(STR_CD        
                                      , BARCODE        
                                      , SKU_CD      
                                      , PUMBUN_CD     
                                      , REG_DATE
                                      , REG_ID
                                      , MOD_DATE
                                      , MOD_ID
                                       )
                                 VALUES(?        
                                      , ?        
                                      , ?      
                                      , ?     
                                      , SYSDATE
                                      , ?
                                      , SYSDATE
                                      , ?
                                       )
        ]]>
    </query>
    
    
    <!-- 점별단품가격마스터 신규 입력  -->
    <query name="INS_STRSKUPRCMST">
        <![CDATA[
            INSERT INTO DPS.PC_STRSKUPRCMST(STR_CD        
                                          , SKU_CD        
                                          , EVENT_CD      
                                          , APP_S_DT        
                                          , APP_E_DT   
                                          , NORM_COST_PRC     
                                          , NORM_SALE_PRC   
                                          , NORM_MG_RATE    
                                          , SAL_COST_PRC     
                                          , SALE_PRC   
                                          , SALE_MG_RATE
                                          , REDU_RATE 
                                          , REG_DATE
                                          , REG_ID
                                          , MOD_DATE
                                          , MOD_ID
                                           )
                                     VALUES(?        
                                          , ?        
                                          , ?      
                                          , TO_CHAR(SYSDATE+1,'YYYYMMDD')        
                                          , ?   
                                          , ?     
                                          , ?   
                                          , ?    
                                          , ?     
                                          , ?   
                                          , ?
                                          , ? 
                                          , SYSDATE
                                          , ?
                                          , SYSDATE
                                          , ?
                                           )
        ]]>
    </query>
    <!-- 점별단품 수정 입력  -->
    <query name="UPD_STRSKUMST">
        <![CDATA[
            UPDATE DPS.PC_STRSKUMST
               SET SKU_NAME      = ?
                 , RECP_NAME     = ?
                 , ADV_ORD_YN    = ?
                 , LOW_ORD_QTY   = ?
                 , OTM_STK_QTY   = ?
                 , LEAD_TIME     = ?
                 , SALE_S_DT     = ?
                 , SALE_E_DT     = ?
                 , BUY_S_DT      = ?
                 , BUY_E_DT      = ?
                 , USE_YN        = ?
                 , MOD_DATE      = SYSDATE
                 , MOD_ID        = ?
             WHERE STR_CD        = ?
               AND SKU_CD        = ?
        ]]>
    </query>
    
    <!-- 점별단품 수정 입력(스타일 수정시)  -->
    <query name="UPD_STRSKUMST_SKU">
        <![CDATA[
            UPDATE DPS.PC_STRSKUMST
               SET SKU_NAME         = SUBSTRB(?,0,30)||' '||COLOR_CD||'/'||SUBSTRB(COM.FN_GET_COMM_NAME('D','P026',SIZE_CD),0,4)
                 , RECP_NAME        = ?
                 , PUMBUN_TYPE      = ?  
                 , MOD_DATE         = SYSDATE
                 , MOD_ID           = ?
             WHERE PUMBUN_CD        = ?
               AND STYLE_CD         = ?
        ]]>
    </query>
    <!-- 소스마킹코드 수정 입력  -->
    <query name="UPD_BARCDMST">
        <![CDATA[
            UPDATE DPS.PC_BARCDMST
               SET PUMMOK_CD      = ?
                 , PUMMOK_SRT_CD  = ?
                 , MOD_DATE       = SYSDATE
                 , MOD_ID         = ?
             WHERE STR_CD         = ?
               AND BARCODE        = ?
        ]]>
    </query>
    
    <!-- 점별단품 신규 입력( 단품 신규 추가시)  -->
    <query name="INS_SKU_STRSKUMST">
        <![CDATA[
            INSERT INTO DPS.PC_STRSKUMST(STR_CD        
                                       , SKU_CD        
                                       , SKU_NAME     
                                       , VEN_CD 
                                       , RECP_NAME     
                                       , PUMBUN_TYPE   
                                       , PUMBUN_CD     
                                       , SKU_TYPE      
                                       , STYLE_TYPE
                                       , STYLE_CD
                                       , COLOR_CD
                                       , SIZE_CD
                                       , SAL_COST_PRC
                                       , SALE_PRC
                                       , SALE_MG_RATE
                                       , ADV_ORD_YN
                                       , LOW_ORD_QTY
                                       , OTM_STK_QTY
                                       , LEAD_TIME
                                       , SALE_S_DT     
                                       , SALE_E_DT     
                                       , BUY_S_DT      
                                       , BUY_E_DT      
                                       , USE_YN
                                       , REG_DATE
                                       , REG_ID
                                       , MOD_DATE
                                       , MOD_ID
                                        )
                                  SELECT DISTINCT
                                         STR_CD
                                       , ?       AS SKU_CD
                                       , SUBSTRB(DPS.FN_GET_STYLE_NAME(?,?),0,30)||' '||?||'/'||SUBSTRB(COM.FN_GET_COMM_NAME('D','P026',?),0,4) AS SKU_NAME
                                       , VEN_CD
                                       , RECP_NAME
                                       , PUMBUN_TYPE
                                       , PUMBUN_CD
                                       , SKU_TYPE
                                       , STYLE_TYPE
                                       , STYLE_CD
                                       , ?       AS COLOR_CD
                                       , ?       AS SIZE_CD
                                       , SAL_COST_PRC
                                       , SALE_PRC
                                       , SALE_MG_RATE
                                       , ADV_ORD_YN
                                       , 0       AS LOW_ORD_QTY
                                       , 0       AS OTM_STK_QTY
                                       , 0       AS LEAD_TIME
                                       , SALE_S_DT
                                       , SALE_E_DT
                                       , BUY_S_DT
                                       , BUY_E_DT
                                       , USE_YN
                                       , SYSDATE AS REG_DATE
                                       , ?       AS REG_ID
                                       , SYSDATE AS MOD_DATE
                                       , ?       AS MOD_ID
                                    FROM DPS.PC_STRSKUMST
                                   WHERE PUMBUN_CD = ?
                                     AND STYLE_CD  = ?
        ]]>
    </query>
    
    
    <!-- 소스마킹코드 신규 입력  ( 단품 신규 추가시)-->
    <query name="INS_SKU_BARCDMST">
        <![CDATA[
            INSERT INTO DPS.PC_BARCDMST(STR_CD        
                                      , BARCODE        
                                      , SKU_CD      
                                      , PUMBUN_CD     
                                      , REG_DATE
                                      , REG_ID
                                      , MOD_DATE
                                      , MOD_ID
                                       )
                                 SELECT DISTINCT
                                        STR_CD
                                      , ?       AS BARCODE
                                      , ?       AS SKU_CD
                                      , ?       AS PUMBUN_CD
                                      , SYSDATE AS REG_DATE
                                      , ?       AS REG_ID
                                      , SYSDATE AS MOD_DATE
                                      , ?       AS MOD_ID
                                   FROM DPS.PC_STRSKUMST
                                  WHERE PUMBUN_CD = ?
                                    AND STYLE_CD  = ?
        ]]>
    </query>
    
    
    <!-- 점별단품가격마스터 신규 입력   ( 단품 신규 추가시)-->
    <query name="INS_SKU_STRSKUPRCMST">
        <![CDATA[
            INSERT INTO DPS.PC_STRSKUPRCMST(STR_CD        
                                          , SKU_CD        
                                          , EVENT_CD      
                                          , APP_S_DT        
                                          , APP_E_DT   
                                          , NORM_COST_PRC     
                                          , NORM_SALE_PRC   
                                          , NORM_MG_RATE    
                                          , SAL_COST_PRC     
                                          , SALE_PRC   
                                          , SALE_MG_RATE
                                          , REDU_RATE 
                                          , REG_DATE
                                          , REG_ID
                                          , MOD_DATE
                                          , MOD_ID
                                           )
                                     SELECT DISTINCT
                                            STR_CD
                                          , ?       AS SKU_CD
                                          , ?       AS EVENT_CD
                                          , TO_CHAR(SYSDATE,'YYYYMMDD')  AS APP_S_DT
                                          , ?       AS APP_E_DT
                                          , SAL_COST_PRC
                                          , SALE_PRC
                                          , SALE_MG_RATE
                                          , SAL_COST_PRC
                                          , SALE_PRC
                                          , SALE_MG_RATE
                                          , ?       AS REDU_RATE
                                          , SYSDATE AS REG_DATE
                                          , ?       AS REG_ID
                                          , SYSDATE AS MOD_DATE
                                          , ?       AS MOD_ID
                                       FROM DPS.PC_STRSKUMST
                                      WHERE PUMBUN_CD = ?
                                        AND STYLE_CD  = ?
        ]]>
    </query>
</service>