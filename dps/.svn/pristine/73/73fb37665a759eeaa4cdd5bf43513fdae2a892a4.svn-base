<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자 : 김경은
 * 회 사 명 : 한국후지쯔
 * 작 성 일 : 2010.02.15
 * 변 경 일 : 
 * 변경내용 : 
 * 개    요 :  개발팀에서 기입해주세요
 -->
<service name="/pord111.po">
    <!-- 입고/반품  리스트 -->
        <gauce name="H_LIST"> 
        <column colName="SLIP_NO"             colType="TB_STRING"  size="12"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_CD"              colType="TB_STRING"  size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_NM"              colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG"           colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG_NM"        colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_DT"              colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT"      colType="TB_STRING"  size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT_NM"   colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"           colType="TB_STRING"  size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_PRC_APP_DT"      colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="NEW_PRC_APP_DT"      colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_NM"           colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REJ_CAN_FLAG"        colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        </gauce>

    <!-- 입고/반품  Master -->
        <gauce name="H_MASTER"> 
        <column colName="SLIP_NO"             colType="TB_STRING"  size="12"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_CD"              colType="TB_STRING"  size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_NM"              colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_CD"           colType="TB_STRING"  size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_NM"           colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="VEN_CD"              colType="TB_STRING"  size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="VEN_NM"              colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OLD_PRC_APP_DT"      colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OLD_EVENT_CD"        colType="TB_STRING"  size="11"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_PRC_APP_DT"      colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="NEW_EVENT_CD"        colType="TB_STRING"  size="11"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG"           colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_FLAG_NM"        colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_OWN_FLAG"        colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORD_OWN_FLAG_NM"     colType="TB_STRING"  size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_FLAG"            colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORD_FLAG_NM"         colType="TB_STRING"  size="30"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="AUTO_SLIP_FLAG"      colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INC_FLAG"            colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="AFT_ORD_FLAG"        colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INOUT_FLAG"          colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORD_DT"              colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="DELI_DT"             colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SM_CONF_DT"          colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SM_ID"               colType="TB_STRING"  size="10"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUYER_CONF_ID"       colType="TB_STRING"  size="10"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_CONF_DT"         colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUYER_CD"            colType="TB_STRING"  size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BUYER_NM"            colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT"      colType="TB_STRING"  size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT_NM"   colType="TB_STRING"  size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="DTL_CNT"             colType="TB_INT"     size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORD_TOT_QTY"         colType="TB_INT"     size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OLD_SALE_TAMT"       colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="NEW_SALE_TAMT"       colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="GAP_TOT_AMT"         colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="NEW_GAP_RATE"        colType="TB_DECIMAL" size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_GAP_RATE"        colType="TB_DECIMAL" size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PAY_COND"            colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="REMARK"              colType="TB_STRING"  size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BIZ_TYPE"            colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BIZ_TYPE_NM"         colType="TB_STRING"  size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="TAX_FLAG"            colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />  
        <column colName="TAX_FLAG_NM"         colType="TB_STRING"  size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="DEL_FLAG"            colType="TB_STRING"  size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REG_DATE"            colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INC_RSN_CD"          colType="TB_STRING"  size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CHK_DT"              colType="TB_STRING"  size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_GAP_TAMT"        colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_COST_TAMT"       colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_SALE_TAMT"       colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_COST_TAMT"       colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_COST_TAMT"       colType="TB_DECIMAL" size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
  
    </gauce>
    
    <!-- 입고/ 반품 Detail -->   
    <gauce name="H_DETAIL"> 
       <column colName="STR_CD"             colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="SLIP_NO"            colType="TB_STRING"   size="12"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="ORD_SEQ_NO"         colType="TB_INT"      size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="PUMMOK_CD"          colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="SKU_CD"             colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="SKU_NM"             colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="ORD_UNIT_CD"        colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="ORD_UNIT_NM"        colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
       <column colName="ORD_QTY"            colType="TB_INT"      size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SALE_PRC"       colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SALE_AMT"       colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_AMT"        colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_GAP_RATE"       colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_PRC"       colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_AMT"       colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"          colType="TB_STRING"   size="6"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_CD"             colType="TB_STRING"   size="6"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SLIP_FLAG"          colType="TB_STRING"   size="1"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MG_RATE"            colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORG_SKU_CD"         colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
      
        <column colName="OLD_COST_PRC"       colType="TB_DECIMAL"   size="9"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />       
        <column colName="OLD_COST_AMT"       colType="TB_DECIMAL"   size="9"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />       
        <column colName="NEW_COST_PRC"       colType="TB_DECIMAL"   size="9"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />     
        <column colName="NEW_COST_AMT"       colType="TB_DECIMAL"   size="9"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_GAP_AMT"        colType="TB_DECIMAL"   size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_GAP_RATE"       colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_COST_AMT"       colType="TB_DECIMAL"   size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_SALE_AMT"       colType="TB_DECIMAL"   size="13"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SEL"                colType="TB_STRING"    size="1"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />        
        
    </gauce>
    
    <!-- 단품상세정보  -->   
    <gauce name="H_SKU_INFO"> 
        <column colName="STR_CD"             colType="TB_STRING"    size="2"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"             colType="TB_STRING"    size="13"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NAME"           colType="TB_STRING"    size="40"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"          colType="TB_STRING"    size="8"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"          colType="TB_STRING"    size="6"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_UNIT_CD"       colType="TB_STRING"    size="3"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_UNIT_NM"       colType="TB_STRING"    size="30"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SALE_PRC"       colType="TB_DECIMAL"   size="9"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SALE_PRC"       colType="TB_DECIMAL"   size="9"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OLD_SAL_COST_PRC"   colType="TB_DECIMAL"   size="9"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NEW_SAL_COST_PRC"   colType="TB_DECIMAL"   size="9"     dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    
    <!-- 규격단품매가인상하발주  리스트 조회 -->
    <query name="SEL_LIST">
        <![CDATA[
        SELECT A.SLIP_NO                                                                         /* 전표번호 */
             , A.STR_CD                                                                          /* 점코드 */
             , DPS.FN_GET_STORE_NAME(A.STR_CD) AS STR_NM                                         /* 점명 */
             , A.SLIP_FLAG                                                                       /* 전표구분 */
             , COM.FN_GET_COMM_NAME('D', 'P201', A.SLIP_FLAG) AS  SLIP_FLAG_NM                   /* 전표구분명 */
             , A.ORD_DT                                                                          /* 발주일자(점출일, 시행일) */
             , A.SLIP_PROC_STAT                                                                  /* 전표진행상태 */
             , COM.FN_GET_COMM_NAME('D', 'P207', A.SLIP_PROC_STAT) AS  SLIP_PROC_STAT_NM         /* 전표진행상태명 */
             , PUMBUN_CD                                                                         /* 품번 */
             , OLD_PRC_APP_DT                                                                    /* 구가격적용일 */
             , NEW_PRC_APP_DT                                                                    /* 신가격적용일 */
             , DPS.FN_GET_PUMBUN_NAME(PUMBUN_CD) AS PUMBUN_NM                                    /* 품번명 */
             , A.REJ_CAN_FLAG                                                                    /* 반려취소구 분 1:반려, 2:취소 */
        FROM (    
              SELECT SLP.SLIP_NO                                                                        
                   , SLP.STR_CD                                                                          
                   , SLP.SLIP_FLAG                                                                      
                   , SLP.ORD_DT                          
                   , SLP.DELI_DT                          
                   , SLP.CHK_DT                         
                   , SLP.SLIP_PROC_STAT                                                                  
                   , ORD_CF_DT
                   , PBN.SALE_ORG_CD
                   , PBN.BUY_ORG_CD
                   , SLP.PUMBUN_CD
                   , SLP.OLD_PRC_APP_DT
                   , SLP.NEW_PRC_APP_DT
                   , SLP.REJ_CAN_FLAG
                FROM  DPS.PO_SLPMST SLP, DPS.PC_STRPBN PBN
               WHERE SLP.SLIP_FLAG      = 'G'
                 AND SLP.DEL_FLAG       = 'N'
                 AND SLP.STR_CD         = ?
                 AND PBN.SKU_FLAG       = ?   
                 AND PBN.SKU_TYPE       = ?
                 AND SLP.STR_CD         = PBN.STR_CD
                 AND SLP.PUMBUN_CD      = PBN.PUMBUN_CD
                 AND SLP.AUTO_SLIP_FLAG = '0'                /* 자동전표여부 */
                 AND EXISTS ( SELECT MYORG.USER_ID
                                FROM COM.V_MYORG MYORG
                               WHERE MYORG.STR_CD      = SLP.STR_CD
                                 AND MYORG.PUMBUN_CD   = SLP.PUMBUN_CD
                                 AND MYORG.USER_ID     = ?
                                 AND MYORG.ORG_FLAG    = ?
                                 AND ROWNUM            = 1
                             )
        ]]>
    </query> 
     <query name="SEL_BUY_ORG_CD">
        <![CDATA[
                 AND SLP.SLIP_PROC_STAT LIKE  ? || '%'
                 AND SLP.PUMBUN_CD      LIKE  ? || '%'
                 AND SLP.INC_RSN_CD     LIKE  ? || '%'
                 AND PBN.BIZ_TYPE       =  ?
            )A
            WHERE  A.BUY_ORG_CD   LIKE ? || '%'
        ]]>
    </query>
    <query name="SEL_SALE_ORG_CD">
        <![CDATA[
                 AND SLP.SLIP_PROC_STAT LIKE  ? || '%'
                 AND SLP.PUMBUN_CD      LIKE  ? || '%'
                 AND SLP.INC_RSN_CD     LIKE  ? || '%'
                 AND PBN.BIZ_TYPE       =  ?
            )A
            WHERE A.SALE_ORG_CD   LIKE ? || '%'
        ]]>
    </query>
    <query name="SEL_ORD_DT">
        <![CDATA[
               AND A.ORD_DT BETWEEN ? AND ?
        ]]>
    </query>
    <query name="SEL_ORD_CONF">
        <![CDATA[
               AND A.ORD_CF_DT BETWEEN ? AND ?
        ]]>
    </query>
    <query name="SEL_DELI_DT">
        <![CDATA[
               AND A.DELI_DT BETWEEN ? AND ?
        ]]>
    </query>
    <query name="SEL_CHK_DT">
        <![CDATA[
               AND A.CHK_DT BETWEEN ? AND ?
        ]]>
    </query>
    <query name="WHERE_SLIP_NO">
        <![CDATA[
            )A
          WHERE A.SLIP_NO = ?
        ]]>
    </query>
    <query name="SEL_ORDERBY">
        <![CDATA[
             ORDER BY A.STR_CD, A.SLIP_NO DESC
        ]]>
    </query>
    
    
    <!-- 규격단품매가인상하발주  마스터 조회 -->
    <query name="SEL_MASTER">
        <![CDATA[
            SELECT SLIP_NO                                                                         /* 전표번호 */
                 , STR_CD                                                                          /* 점코드 */
                 , DPS.FN_GET_STORE_NAME(STR_CD) AS STR_NM                                         /* 점명 */
                 , PUMBUN_CD                                                                       /* 품번코드 */
                 , DPS.FN_GET_PUMBUN_NAME(PUMBUN_CD) AS PUMBUN_NM                                  /* 품번명 */
                 , VEN_CD                                                                          /* 협력사코드 */
                 , DPS.FN_GET_VENDOR_NAME(VEN_CD) AS VEN_NM                                        /* 협력사명 */
                 , OLD_PRC_APP_DT                                                                  /* 구가격적용일 */
                 , OLD_EVENT_CD                                                                    /* 구행사코드 */
                 , NEW_PRC_APP_DT                                                                  /* 신가격적용일 */
                 , NEW_EVENT_CD                                                                    /* 신행사코드 */
                 , SLIP_FLAG                                                                       /* 전표구분 */
                 , COM.FN_GET_COMM_NAME('D', 'P201', SLIP_FLAG) AS  SLIP_FLAG_NM                   /* 전표구분명 */
                 , ORD_OWN_FLAG                                                                    /* 발주주체구분 */
                 , COM.FN_GET_COMM_NAME('D', 'P202', ORD_OWN_FLAG) AS ORD_OWN_FLAG_NM              /* 발주주체구분명 */
                 , ORD_FLAG                                                                        /* 발주구분 */
                 , COM.FN_GET_COMM_NAME('D', 'P203', ORD_FLAG) AS ORD_FLAG_NM                      /* 발주구분명 */
                 , AUTO_SLIP_FLAG                                                                  /* 자동전표구분 */
                 , INC_FLAG                                                                        /* 인상하구분 */
                 , AFT_ORD_FLAG                                                                    /* 사전사후구분 */
                 , INOUT_FLAG                                                                      /* 출입구분 */
                 , ORD_DT                                                                          /* 발주일자(점출일, 시행일) */
                 , DELI_DT                                                                         /* 납품(반품)예정일(점입일, 시행일) */
                 , SM_CONF_DT                                                                      /* SM확정일자 */
                 , SM_ID                                                                           /* SM ID */   
                 , BUYER_CONF_ID                                                                   /* 바이어ID */
                 , ORD_CF_DT AS ORD_CONF_DT                                                        /* 발주확정일자 */ 
                 , BUYER_CD                                                                        /* 바이어코드 */
                 , DPS.FN_GET_BUYER_NAME(BUYER_CD) AS BUYER_NM                                     /* 바이어코드명 */
                 , SLIP_PROC_STAT                                                                  /* 전표진행상태 */
                 , COM.FN_GET_COMM_NAME('D', 'P207', SLIP_PROC_STAT) AS  SLIP_PROC_STAT_NM         /* 전표진행상태명 */
                 , DTL_CNT                                                                         /* 명세건수 */
                 , DECODE(SLIP_PROC_STAT, '09', CHK_TOT_QTY, ORD_TOT_QTY) AS ORD_TOT_QTY           /* 발주수량합(검품확정'09'일경우 검품수량합) */
                 , DECODE(SLIP_PROC_STAT, '09', CHK_OLD_SALE_TAMT, OLD_SALE_TAMT) AS OLD_SALE_TAMT /* 구매가금액합(검품확정'09'일경우 검품매가금액합) */
                 , DECODE(SLIP_PROC_STAT, '09', CHK_SALE_TAMT, NEW_SALE_TAMT) AS NEW_SALE_TAMT     /* 신매가금액합(검품확정'09'일경우 검품매가금액합) */
                 , DECODE(SLIP_PROC_STAT, '09', CHK_GAP_AMT, GAP_TOT_AMT) AS GAP_TOT_AMT           /* 차익액합(검품확정'09'일경우 검품차익액합) */
                 , OLD_GAP_RATE                                                                    /* 구차익율 */
                 , DECODE(SLIP_PROC_STAT, '09', CHK_GAP_RATE, NEW_GAP_RATE) AS NEW_GAP_RATE        /* 신차익율(검품확정'09'일경우 검품차익율) */
                 , PAY_COND                                                                        /* 지불조건 */
                 , REMARK                                                                          /* 비고 */
                 , BIZ_TYPE                                                                        /* 거래형태 */
                 , COM.FN_GET_COMM_NAME('D', 'P002', BIZ_TYPE) AS BIZ_TYPE_NM                      /* 거래형태명 */
                 , TAX_FLAG                                                                        /* 과세구분 */
                 , COM.FN_GET_COMM_NAME('D', 'P004', TAX_FLAG) AS TAX_FLAG_NM                      /* 과세구분명 */
                 , DEL_FLAG                                                                        /* 삭제구분 */
                 , TO_CHAR(REG_DATE, 'YYYYMMDD') AS REG_DATE                                       /* 등록일자 */
                 , INC_RSN_CD                                                                      /* 인상하사유 */
                 , CHK_DT                                                                          /* 검품확정일 */
                 , OLD_GAP_TAMT                                                                    /* 구차익액합 */
                 , GAP_COST_TAMT                                                                   /* 원가차익액합 */
                 , GAP_SALE_TAMT                                                                   /* 매가차익액합 */
                 , OLD_COST_TAMT                                                                   /* 구원가액합 */
                 , NEW_COST_TAMT                                                                   /* 신원가액합 */
               FROM DPS.PO_SLPMST
              WHERE STR_CD = ?
                AND SLIP_NO = ?
        ]]>
    </query> 
    
    <!-- 규격단품매가인상하발주  상세 조회 -->
    <query name="SEL_DETAIL">
        <![CDATA[
            SELECT DTL.STR_CD                                                                                      /* 점 */
                 , DTL.SLIP_NO                                                                                     /* 전표번호 */
                 , DTL.ORD_SEQ_NO                                                                                  /* 전표상세번호 */
                 , DTL.PUMMOK_CD                                                                                   /* 품목코드 */
                 , DTL.SKU_CD                                                                                      /* 단품코드 */
                 , DPS.FN_GET_SKU_NAME(DTL.SKU_CD) AS SKU_NM                                                       /* 단품명 */
                 , DTL.ORD_UNIT_CD                                                                                 /* 발주단위 */
                 , COM.FN_GET_COMM_NAME('D', 'P013', DTL.ORD_UNIT_CD) AS ORD_UNIT_NM                               /* 발주단위명 */
                 , DTL.ORD_QTY                                                                                     /* 발주수량 */
				 , DTL.OLD_SALE_PRC                                                                                /* 구매가단가 */
				 , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_OLD_SALE_AMT, DTL.OLD_SALE_AMT) AS OLD_SALE_AMT        /* 구매가금액 */
                 , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_GAP_AMT, DTL.NEW_GAP_AMT) AS NEW_GAP_AMT               /* 신차익액 */
                 , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_GAP_RATE, DTL.NEW_GAP_RATE) AS NEW_GAP_RATE            /* 신차익율 */
                 , DTL.NEW_SALE_PRC                                                                                /* 신매가단가 */
                 , DECODE(MST.SLIP_PROC_STAT, '09', DTL.CHK_SALE_AMT, DTL.NEW_SALE_AMT) AS NEW_SALE_AMT            /* 신매가금액 */
                 , DTL.PUMBUN_CD                                                                                   /* 품번코드 */
                 , DTL.VEN_CD                                                                                      /* 협력사코드 */
                 , DTL.SLIP_FLAG                                                                                   /* 전표구분 */
                 , DTL.MG_RATE                                                                                     /* 마진율 */
                 , DTL.SKU_CD AS ORG_SKU_CD                                                                        /* 이전단품코드  */
                 , OLD_COST_PRC                                                                                    /* 구원가단가 */
                 , OLD_COST_AMT                                                                                    /* 구원가금액 */
                 , NEW_COST_PRC                                                                                    /* 신원가단가 */
                 , NEW_COST_AMT                                                                                    /* 신원가금액 */
                 , OLD_GAP_AMT                                                                                     /* 구차익액 */
                 , DTL.OLD_GAP_RATE                                                                                /* 구차익율 */
                 , GAP_COST_AMT                                                                                    /* 원가차익액 */
                 , GAP_SALE_AMT                                                                                    /* 매가차익액 */
                 , 'F' AS SEL
              FROM DPS.PO_SLPDTL DTL
                 , DPS.PO_SLPMST MST
             WHERE DTL.STR_CD  = MST.STR_CD
               AND DTL.SLIP_NO = MST.SLIP_NO
               AND DTL.STR_CD  = ?
               AND DTL.SLIP_NO = ?
        ]]>
    </query> 
    
    <!-- 규격단품 상세정보 조회 -->
    <query name="SEL_SKU_INFO">
        <![CDATA[
			SELECT STR_CD
			     , SKU_CD
			     , SKU_NAME
			     , PUMMOK_CD
			     , PUMBUN_CD
			     , SALE_UNIT_CD
			     , COM.FN_GET_COMM_NAME('D', 'P013', SALE_UNIT_CD) AS SALE_UNIT_NM
			     , SUM(OLD_SALE_PRC) AS OLD_SALE_PRC
			     , SUM(NEW_SALE_PRC) AS NEW_SALE_PRC
                 , SUM(OLD_SAL_COST_PRC) AS OLD_SAL_COST_PRC
                 , SUM(NEW_SAL_COST_PRC) AS NEW_SAL_COST_PRC
			  FROM (
			        /*구매가단가*/
			        SELECT PMST.STR_CD
			             , PMST.SKU_CD
			             , MST.SKU_NAME
			             , MST.PUMMOK_CD
			             , MST.PUMBUN_CD
			             , MST.SALE_UNIT_CD
			             , PMST.SALE_PRC AS OLD_SALE_PRC
			             , 0 AS NEW_SALE_PRC
                         , PMST.SAL_COST_PRC    AS OLD_SAL_COST_PRC
                         , 0 AS NEW_SAL_COST_PRC
			         FROM DPS.PC_STRSKUPRCMST PMST
			            , DPS.PC_STRSKUMST    SMST
			            , DPS.PC_SKUMST       MST
			        WHERE PMST.STR_CD       = SMST.STR_CD
			          AND PMST.SKU_CD       = SMST.SKU_CD
			          AND PMST.SKU_CD       = MST.SKU_CD
			          AND PMST.STR_CD       = ?
			          AND SMST.PUMBUN_CD    = ? 
			          AND ? BETWEEN PMST.APP_S_DT AND PMST.APP_E_DT
			          AND PMST.SKU_CD   = ?
			          AND PMST.EVENT_CD = ?  
			        UNION ALL
			        /*신매가단가*/
			        SELECT PMST.STR_CD
			             , PMST.SKU_CD
			             , MST.SKU_NAME
			             , MST.PUMMOK_CD
			             , MST.PUMBUN_CD
			             , MST.SALE_UNIT_CD
			             , 0 AS OLD_SALE_PRC
			             , PMST.SALE_PRC AS NEW_SALE_PRC
                         , 0 AS OLD_SAL_COST_PRC
                         , PMST.SAL_COST_PRC AS NEW_SAL_COST_PRC
			         FROM DPS.PC_STRSKUPRCMST PMST
			            , DPS.PC_STRSKUMST    SMST
			            , DPS.PC_SKUMST       MST
			        WHERE PMST.STR_CD       = SMST.STR_CD
			          AND PMST.SKU_CD       = SMST.SKU_CD
			          AND PMST.SKU_CD       = MST.SKU_CD
			          AND PMST.STR_CD       = ?
			          AND SMST.PUMBUN_CD    = ? 
			          AND ? BETWEEN PMST.APP_S_DT AND PMST.APP_E_DT
			          AND PMST.SKU_CD   = ?
			          AND PMST.EVENT_CD = ?  
			  )
			GROUP BY STR_CD
			     , SKU_CD
			     , SKU_NAME
			     , PUMMOK_CD
			     , PUMBUN_CD
			     , SALE_UNIT_CD
        ]]>
    </query> 
    
    <!-- 전표번호 생성 -->
    <query name="SEL_SLIP_NO">
        <![CDATA[
            SELECT DPS.FN_GET_SLIPNO(?, ?, ?) AS SLIP_NO
              FROM DUAL              
          
        ]]>
    </query> 
    
    <!-- 전표번호상세번호 생성 -->
    <query name="SEL_ORD_SEQ_NO">
        <![CDATA[
           SELECT LPAD(NVL(MAX(ORD_SEQ_NO),0)+1,3,'0') ORD_SEQ_NO
              FROM DPS.PO_SLPDTL
             WHERE STR_CD = ?
               AND SLIP_NO = ?
        ]]>
    </query>
    
    <!-- 규격단품매가인상하발주 MASTER 등록 -->
    <query name="INS_MASTER">
        <![CDATA[
            INSERT INTO DPS.PO_SLPMST ( 
                                     SLIP_NO                                     /* 전표번호 */
                                   , STR_CD                                      /* 점코드 */                                                   
                                   , PUMBUN_CD                                   /* 품번코드 */                          
                                   , VEN_CD                                      /* 협력사코드 */ 
                                   , OLD_PRC_APP_DT                              /* 구가격적용일 */                        
                                   , OLD_EVENT_CD                                /* 구행사코드 */                         
                                   , NEW_PRC_APP_DT                              /* 신가격적용일 */                        
                                   , NEW_EVENT_CD                                /* 신행사코드 */                         
                                   , SLIP_FLAG                                   /* 전표구분 */                          
                                   , ORD_OWN_FLAG                                /* 발주주체구분 */                        
                                   , ORD_FLAG                                    /* 발주구분 */                          
                                   , AUTO_SLIP_FLAG                              /* 자동전표구분 */                        
                                   , INC_FLAG                                    /* 인상하구분 */  
                                   , INC_RSN_CD                                  /* 인상하사유 */                         
                                   , AFT_ORD_FLAG                                /* 사전사후구분 */                        
                                   , INOUT_FLAG                                  /* 출입구분 */                          
                                   , ORD_DT                                      /* 발주일자(점출일, 시행일) */                
                                   , DELI_DT                                     /* 납품(반품)예정일(점입일, 시행일) */
                                   , SM_CONF_DT                                  /* SM확정일자 */
                                   , SM_ID                                       /* SM ID */  
                                   , BUYER_CONF_ID                               /* 바이어ID */
                                   , ORD_CONF_DT                                 /* 바이어확정일자(발주확정일자) */          
                                   , BUYER_CD                                    /* 바이어코드 */                                                 
                                   , SLIP_PROC_STAT                              /* 전표진행상태 */                        
                                   , DTL_CNT                                     /* 명세건수 */                          
                                   , ORD_TOT_QTY                                 /* 발주수량합 */                         
                                   , OLD_SALE_TAMT                               /* 구매가금액합 */                        
                                   , NEW_SALE_TAMT                               /* 신매가금액합 */                    
                                   , GAP_TOT_AMT                                 /* 신차익액합 */
                                   , OLD_GAP_TAMT                                /* 구차익액합 */ 
                                   , GAP_COST_TAMT                               /* 원가차익액합 */ 
                                   , GAP_SALE_TAMT                               /* 매가차익액합 */ 
                                   , OLD_COST_TAMT                               /* 구원가금액합 */
                                   , NEW_COST_TAMT                               /* 신원가금액합 */                          
                                   , NEW_GAP_RATE                                /* 신차익율 */  
                                   , OLD_GAP_RATE                                /* 구차익율 */                          
                                   , PAY_COND                                    /* 지불조건 */                          
                                   , REMARK                                      /* 비고 */                            
                                   , BIZ_TYPE                                    /* 거래형태 */                          
                                   , TAX_FLAG                                    /* 과세구분 */
                                   , IMPORT_FLAG                                 /* 수입발주구분 */
                                   , DEL_FLAG                                    /* 삭제구분 */ 
                                   , ORD_CF_DT                                   /* 발주확정일 */   
                                   , REG_DATE                                    /* 등록일시 */
                                   , REG_ID                                      /* 등록자 */
                                   , MOD_DATE                                    /* 수정일시 */
                                   , MOD_ID                                      /* 수정자 */                
                                    )
                             VALUES (
                                       ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , DECODE('00', DPS.FN_GET_ORDCONF_CHK(?,?), TO_CHAR(SYSDATE, 'YYYYMMDD'), '        ')
                                     , SYSDATE
                                     , ?
                                     , SYSDATE
                                     , ?
                                     )

        ]]>
    </query>  
    
    <!-- 발주매입 MASTER LOG 등록 -->
    <query name="INS_MASTER_LOG">
        <![CDATA[
            MERGE INTO DPS.PO_SLPMSTLG
               USING DUAL
               ON (STR_CD = ? AND SLIP_NO = ?)
               WHEN MATCHED THEN 
                UPDATE SET SLIP_FLAG         = ?                          /* 전표구분 */                          
                         , SLIP_PROC_STAT    = ?                          /* 전표진행상태 */  
               WHEN NOT MATCHED THEN 
                INSERT ( 
                       STR_CD                                      /* 점코드 */ 
                     , SLIP_NO                                     /* 전표번호 */                                                  
                     , SLIP_FLAG                                   /* 전표구분 */                          
                     , SLIP_PROC_STAT                              /* 전표진행상태 */                                     
                      )
               VALUES (
                        ?
                      , ? 
                      , ?
                      , ?
                      )

        ]]>
    </query>
    
    <!-- 규격단품매가인상하발주 MASTER 수정 -->
    <query name="UPD_MASTER">
        <![CDATA[
            UPDATE DPS.PO_SLPMST
              SET PUMBUN_CD = ?                                   /* 품번코드 */                          
                , VEN_CD = ?                                      /* 협력사코드 */  
                , OLD_PRC_APP_DT = ?                              /* 구가격적용일 */                        
                , OLD_EVENT_CD = ?                                /* 구행사코드 */                       
                , NEW_PRC_APP_DT = ?                              /* 신가격적용일 */                        
                , NEW_EVENT_CD = ?                                /* 신행사코드 */                         
                , SLIP_FLAG = ?                                   /* 전표구분 */                          
                , AFT_ORD_FLAG = ?                                /* 사전사후구분 */  
                , INC_FLAG = ?                                    /* 인상하구분 */  
                , INC_RSN_CD = ?                                  /* 인상하사유 */                                              
                , ORD_DT = ?                                      /* 발주일자(점출일, 시행일) */                
                , DELI_DT = ?                                     /* 납품(반품)예정일(점입일, 시행일) */
                , SM_CONF_DT = ?                                  /* SM확정일자 */
                , SM_ID = ?                                       /* SM ID */  
                , BUYER_CONF_ID = ?                               /* 바이어ID */
                , ORD_CONF_DT = ?                                 /* 바이어확정일자(발주확정일자) */          
                , BUYER_CD = ?                                    /* 바이어코드 */                                                 
                , SLIP_PROC_STAT = ?                              /* 전표진행상태 */                        
                , DTL_CNT = ?                                     /* 명세건수 */                          
                , ORD_TOT_QTY = ?                                 /* 발주수량합 */                         
                , OLD_SALE_TAMT = ?                               /* 구매가금액합 */                        
                , NEW_SALE_TAMT = ?                               /* 신매가금액합 */                        
                , GAP_TOT_AMT = ?                                 /* 신차익액합 */   
                , OLD_GAP_TAMT = ?                                /* 구차익액합 */ 
                , GAP_COST_TAMT = ?                               /* 원가차익액합 */ 
                , GAP_SALE_TAMT = ?                               /* 매가차익액합 */    
                , OLD_COST_TAMT = ?                               /* 구원가금액합 */
                , NEW_COST_TAMT = ?                               /* 신원가금액합 */                     
                , NEW_GAP_RATE = ?                                /* 신차익율 */  
                , OLD_GAP_RATE = ?                                /* 구차익율 */                         
                , PAY_COND = ?                                    /* 지불조건 */                          
                , REMARK = ?                                      /* 비고 */                            
                , BIZ_TYPE = ?                                    /* 거래형태 */                          
                , TAX_FLAG = ?                                    /* 과세구분 */  
                , ORD_CF_DT = DECODE('00', DPS.FN_GET_ORDCONF_CHK(?,?), TO_CHAR(SYSDATE, 'YYYYMMDD'), '        ') /* 발주확정일 */ 
                , MOD_DATE = SYSDATE                              /* 수정일시 */
                , MOD_ID = ?                                      /* 수정자 */ 
            WHERE STR_CD = ?
              AND SLIP_NO = ?
        ]]>
    </query>
    
    <!-- 규격단품매가인상하발주 MASTER 삭제 -->
    <query name="DEL_MASTER">
        <![CDATA[
         DELETE FROM DPS.PO_SLPMST
           WHERE STR_CD = ?
             AND SLIP_NO = ?
        ]]>
    </query>  
    
    <!-- 규격단품매가인상하발주 DETAIL 전체삭제 -->
    <query name="DEL_DETAIL_ALL">
        <![CDATA[
         DELETE FROM DPS.PO_SLPDTL
           WHERE STR_CD = ?
             AND SLIP_NO = ?
        ]]>
    </query> 
    
     <!-- 규격단품매가인상하발주 LOG 삭제 -->
    <query name="DEL_DETAIL_LOG">
        <![CDATA[
         DELETE FROM DPS.PO_SLPMSTLG
           WHERE STR_CD = ?
             AND SLIP_NO = ?
        ]]>
    </query> 
    
    <!-- 규격단품매가인상하발주 DETAIL 등록 -->
    <query name="INS_DETAIL">
        <![CDATA[
            INSERT INTO DPS.PO_SLPDTL ( 
                                     STR_CD                  /* 점 */                
                                   , SLIP_NO                 /* 전표번호  */                        
                                   , ORD_SEQ_NO              /* 전표상세번호 */  
                                   , PUMMOK_CD               /* 품목코드  */  
                                   , SKU_CD                  /* 단품코드  */        
                                   , ORD_UNIT_CD             /* 발주단위  */ 
                                   , MG_RATE                 /* 마진율 */   
                                   , NEW_GAP_AMT             /* 신차익액  */           
                                   , ORD_QTY                 /* 발주수량 */    
                                   , OLD_SALE_PRC            /* 구매가단가 */     
                                   , OLD_SALE_AMT            /* 구매가금액 */     
                                   , NEW_SALE_PRC            /* 신매가단가 */     
                                   , NEW_SALE_AMT            /* 신매가금액 */                         
                                   , OLD_COST_PRC            /* 구원가단가 */                        
                                   , OLD_COST_AMT            /* 구원가금액 */                       
                                   , NEW_COST_PRC            /* 신원가단가 */                        
                                   , NEW_COST_AMT            /* 신원가금액 */     
                                   , GAP_COST_AMT            /* 원가차익금액 */     
                                   , GAP_SALE_AMT            /* 매가차익금액 */
                                   , OLD_GAP_AMT             /* 구차익액 */  
                                   , OLD_GAP_RATE            /* 구차익율 */
                                   , NEW_GAP_RATE            /* 구차익율 */            
                                   , PUMBUN_CD               /* 품번코드 */    
                                   , VEN_CD                  /* 협력사코드 */     
                                   , SLIP_FLAG               /* 전표구분 */     
                                   , REG_DATE                /* 등록일시 */                     
                                   , REG_ID                  /* 등록자 */   
                                   , MOD_DATE                /* 수정일시 */  
                                   , MOD_ID                  /* 수정자 */   
                                    )
                             VALUES (
                                       ?
                                     , ?
                                     , ?
                                     , ?
                                     , ? 
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , ?
                                     , SYSDATE
                                     , ?
                                     , SYSDATE
                                     , ?
                                     )

        ]]>
    </query>  
    
    <!-- 규격단품매가인상하발주 DETAIL 수정 -->
    <query name="UPD_DETAIL">
        <![CDATA[
            UPDATE DPS.PO_SLPDTL
              SET PUMMOK_CD = ?                                   /* 품목코드  */  
                , SKU_CD = ?                                      /* 단품코드  */        
                , ORD_UNIT_CD = ?                                 /* 발주단위  */   
                , MG_RATE = ?                                     /* 마진율 */ 
                , NEW_GAP_AMT = ?                                 /* 신차익액  */          
                , ORD_QTY = ?                                     /* 발주수량 */    
                , OLD_SALE_PRC = ?                                /* 구매가단가 */     
                , OLD_SALE_AMT = ?                                /* 구매가금액 */     
                , NEW_SALE_PRC = ?                                /* 신매가단가 */     
                , NEW_SALE_AMT = ?                                /* 신매가금액 */    
                , OLD_COST_PRC = ?                                /* 구원가단가 */     
                , OLD_COST_AMT = ?                                /* 구원가금액 */     
                , NEW_COST_PRC = ?                                /* 신원가단가 */     
                , NEW_COST_AMT = ?                                /* 신원가금액 */  
                , GAP_COST_AMT = ?                                /* 원가차익금액 */     
                , GAP_SALE_AMT = ?                                /* 매가차익금액 */  
                , OLD_GAP_AMT  = ?                                /* 구차익액 */
                , OLD_GAP_RATE = ?                                /* 구차익율 */
                , NEW_GAP_RATE = ?                                /* 신차익율 */
                , PUMBUN_CD    = ?                                /* 품번코드 */    
                , VEN_CD       = ?                                /* 협력사코드 */     
                , SLIP_FLAG    = ?                                /* 전표구분 */       
                , MOD_DATE     = SYSDATE                          /* 수정일시 */
                , MOD_ID       = ?                                /* 수정자 */ 
            WHERE STR_CD       = ?
              AND SLIP_NO      = ?
              AND ORD_SEQ_NO   = ?
        ]]>
    </query>
    
    <!-- 규격단품매가인상하발주 DETAIL 삭제 -->
    <query name="DEL_DETAIL">
        <![CDATA[
         DELETE FROM DPS.PO_SLPDTL
           WHERE STR_CD = ?
             AND SLIP_NO = ?
             AND ORD_SEQ_NO = ?
        ]]>
    </query> 
    
</service>