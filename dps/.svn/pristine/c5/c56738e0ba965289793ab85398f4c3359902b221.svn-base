<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자 : 박래형
 * 회 사 명 : 한국후지쯔
 * 작 성 일 : 2010.03.05
 * 변 경 일 : 
 * 변경내용 : 
 * 개    요 :  INVOICE SHEET 등록
 -->
<service name="/pord505.po">
    
    <!-- INVOICE 리스트 -->
    <gauce name="H_LIST"> 
        <column colName="STR_CD"               colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_NM"               colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_YM"           colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_SEQ_NO"       colType="TB_STRING"   size="5"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_DT"           colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_NO"           colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OFFER_NO"             colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OFFER_SHEET_NO"       colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_CD"            colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_NM"            colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="VEN_CD"               colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="VEN_NM"               colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />  
        <column colName="SLIP_PROC_STAT"       colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT_NM"    colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />  
        <column colName="CLOSE_FLAG"           colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STYLE_TYPE"           colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />  
    </gauce>                                  
                                              
    <!-- INVOICE  Master -->                  
    <gauce name="H_MASTER">                   
        <column colName="STR_CD"               colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_YM"           colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_SEQ_NO"       colType="TB_DECIMAL"  size="5"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OFFER_DT"             colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OFFER_YM"             colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="OFFER_SEQ_NO"         colType="TB_DECIMAL"  size="5"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_SHEET_NO"       colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_NO"           colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_DT"           colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_CD"            colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="VEN_CD"               colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BUYER_CD"             colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUYER_NM"             colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PRC_COND"             colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PAYMENT_COND"         colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PAYMENT_DTL_COND"     colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="IMPORT_COUNTRY"       colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SHIP_PORT"            colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ARRI_PORT"            colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="LC_DATE"              colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="LC_NO"                colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ETD"                  colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ETA"                  colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="CURRENCY_CD"          colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="EXC_APP_DT"           colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="EXC_RATE"             colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PACKING_CHARGE"       colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="NCV"                  colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BL_NO"                colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ENTRY_DT"             colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="IMPORT_NO"            colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_NO"              colType="TB_STRING"   size="12"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="DELI_DT"              colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PRC_APP_DT"           colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="CHK_DT"               colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_TOT_QTY"      colType="TB_DECIMAL"  size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_TOT_AMT"      colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="INVOICE_WON_TOT_AMT"  colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SALE_TOT_AMT"         colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />         
        <column colName="REMARK"               colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="REG_DATE"             colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMBUN_NAME"          colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SKU_TYPE"             colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SKU_TYPE_NM"          colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BIZ_TYPE"             colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="BIZ_TYPE_NM"          colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="TAX_FLAG"             colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="TAX_FLAG_NM"          colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="VEN_NAME"             colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="GAP_RATE"             colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="GAP_TOT_AMT"          colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT"       colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SLIP_PROC_STAT_NM"    colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />  
    </gauce>                                                        
    
    <!-- INVOICE Detail -->   
    <gauce name="H_DETAIL"> 
        <column colName="CHECK1"               colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STR_CD"               colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_YM"           colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_SEQ_NO"       colType="TB_STRING"   size="5"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_DTL_SEQ_NO"   colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"               colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NM"               colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"             colType="TB_STRING"   size="54"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COLOR_CD"             colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"              colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MODEL_NO"             colType="TB_STRING"   size="50"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_CD"          colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORD_UNIT_NM"          colType="TB_STRING"   size="20"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_QTY"          colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_UNIT_AMT"     colType="TB_DECIMAL"  size="11"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_AMT"          colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_KOR_UNIT_AMT" colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INVOICE_KOR_AMT"      colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_PRC"             colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_AMT"             colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_RATE"             colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_AMT"              colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"            colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce> 

    <!-- OFFER 정보 POPUP -->
    <gauce name="H_OFFERINFO">
        <column colName="STR_CD"               colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="STR_NM"               colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORDER_DT"             colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORDER_YM"             colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORDER_SEQ_NO"         colType="TB_INT"      size="5"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="ORDER_NO"             colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"             colType="TB_STRING"   size="54"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COLOR_CD"             colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"              colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORDER_QTY"            colType="TB_INT"      size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORDER_AMT"            colType="TB_DECIMAL"  size="11"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>    

    <!-- 디테일 단품 정보 원래 있던것
    <gauce name="H_SKU_INFO">
        <column colName="SALE_PRC"             colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="MODEL_NO"             colType="TB_STRING"   size="24"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="PUMMOK_CD"            colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"             colType="TB_STRING"   size="54"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="COLOR_CD"             colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" /> 
        <column colName="SIZE_CD"              colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />  
    </gauce>    
  -->   
          
    <!-- 단품 매가 원가--> 
    <gauce name="H_SKU_INFO">
        <column colName="SKU_CD"               colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_NM"               colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_PRC"             colType="TB_DECIMAL"  size="9"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMMOK_CD"            colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_CD"             colType="TB_STRING"   size="54"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COLOR_CD"             colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SIZE_CD"              colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MODEL_NO"             colType="TB_STRING"   size="54"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_UNIT_CD"         colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_UNIT_NM"         colType="TB_STRING"   size="20"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_QTY"            colType="TB_DECIMAL"  size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_UNIT_AMT"       colType="TB_DECIMAL"  size="11"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_AMT"            colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="EXC_RATE"             colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="TAX_FLAG"             colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="RUND_FLAG"            colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COST_PRC"             colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COST_AMT"             colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_AMT"             colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_RATE"             colType="TB_DECIMAL"  size="5"    dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="GAP_AMT"              colType="TB_DECIMAL"  size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>    
    
    <!-- OFFER  정보  -->
    <gauce name="H_OFFER_INFO">
        <column colName="STR_CD"               colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_YM"             colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_SEQ_NO"         colType="TB_DECIMAL"  size="5"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_DT"             colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_SHEET_NO"       colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_CD"            colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PUMBUN_NAME"          colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_CD"               colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_NAME"             colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUYER_CD"             colType="TB_STRING"   size="6"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PRC_COND"             colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SHIPPMENT_CD"         colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CURRENCY_CD"          colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_TOT_QTY"        colType="TB_DECIMAL"  size="7"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OFFER_TOT_AMT"        colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PAYMENT_COND"         colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PAYMENT_DTL_COND"     colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SHIP_PORT"            colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ARRI_PORT"            colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LC_DATE"              colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LC_NO"                colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LC_EFFECTIVE_DT"      colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="LC_OPEN_BANK"         colType="TB_STRING"   size="40"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VENDOR_INFO"          colType="TB_STRING"   size="20"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="IMPORT_COUNTRY"       colType="TB_STRING"   size="3"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ATTN"                 colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="MESSRS"               colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VALIDITY"             colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SHIPPMENT"            colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PACKING"              colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INSURANCE"            colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PRICE"                colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ORIGIN"               colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="INSPECTION"           colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="DELIVERY"             colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BL_NO"                colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BL_DT"                colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PAYMENT"              colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COMMODITY"            colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PACKING_CHARGE"       colType="TB_DECIMAL"  size="13"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="NCV"                  colType="TB_DECIMAL"  size="13"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SHIPPER"              colType="TB_STRING"   size="100"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="EXC_APP_DT"           colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="EXC_RATE"             colType="TB_DECIMAL"  size="15"   dec="2" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CLOSE_FLAG"           colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CLOSE_DT"             colType="TB_STRING"   size="8"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="EXPNC_CLOSE_FLAG"     colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COST_CLOSE_FLAG"      colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_CD"               colType="TB_STRING"   size="13"   dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SKU_TYPE"             colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="STYLE_TYPE"           colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        
    </gauce>                                                                     
                                                                                 
    <!-- INVOICENO  정보  -->                                                      
    <gauce name="H_INVOICE_INFO">                                                
        <column colName="INVOICE_NO"           colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL"  roundMode="ROUND" />
    </gauce>                                                                    
                                                                                 
    <!-- INVOICENO  상태  -->                                                      
    <gauce name="H_INVOICE_STAT">                                                
        <column colName="OFFER_SHEET_NO"       colType="TB_STRING"   size="30"   dec="0" keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="SLIP_PROC_STAT"       colType="TB_STRING"   size="2"    dec="0" keyType="TB_NORMAL"  roundMode="ROUND" />
        <column colName="CLOSE_FLAG"           colType="TB_STRING"   size="1"    dec="0" keyType="TB_NORMAL"  roundMode="ROUND" />
    </gauce>    
    
    <!-- INVOICE  리스트 조회 -->
    <query name="SEL_LIST">
        <![CDATA[  
            SELECT 
                   A.STR_CD
                 , DPS.FN_GET_STORE_NAME(A.STR_CD)                      AS STR_NM
                 , A.INVOICE_YM
                 , A.INVOICE_SEQ_NO
                 , A.INVOICE_DT
                 , A.INVOICE_NO
                 , A.STR_CD || A.OFFER_YM || LPAD(A.OFFER_SEQ_NO,5,'0') AS OFFER_NO
                 , A.OFFER_SHEET_NO
                 , A.PUMBUN_CD
                 , DPS.FN_GET_PUMBUN_NAME(A.PUMBUN_CD)                  AS PUMBUN_NM
                 , A.VEN_CD
                 , DPS.FN_GET_VENDOR_NAME(A.VEN_CD)                     AS VEN_NM
                 , C.SLIP_PROC_STAT
                 , COM.FN_GET_COMM_NAME('D', 'P207', C.SLIP_PROC_STAT)  AS SLIP_PROC_STAT_NM
                 , B.CLOSE_FLAG
                 , D.STYLE_TYPE
              FROM DPS.PO_INVMST A
                 , DPS.PO_OFFMST B
                 , DPS.PO_SLPMST C
                 , DPS.PC_PBNMST D
             WHERE A.STR_CD       = B.STR_CD
               AND A.STR_CD       = C.STR_CD
               AND A.SLIP_NO      = C.SLIP_NO
               AND A.OFFER_YM     = B.OFFER_YM
               AND A.OFFER_SEQ_NO = B.OFFER_SEQ_NO
               AND A.PUMBUN_CD    = D.PUMBUN_CD
               AND A.STR_CD       = ?
               AND A.INVOICE_DT BETWEEN  ? AND ?
               AND A.INVOICE_NO     LIKE ? || '%' 
               AND A.OFFER_SHEET_NO LIKE ? || '%' 
               AND A.PUMBUN_CD      LIKE ? || '%'
               AND A.VEN_CD         LIKE ? || '%'
               AND EXISTS ( SELECT MYORG.USER_ID
                                FROM COM.V_MYORG MYORG
                               WHERE MYORG.STR_CD      = A.STR_CD
                                 AND MYORG.PUMBUN_CD   = A.PUMBUN_CD
                                 AND MYORG.USER_ID     = ?
                                 AND ROWNUM            = 1
                                 AND MYORG.ORG_FLAG    = ?
                          )
             ORDER BY A.STR_CD DESC, A.INVOICE_DT DESC, A.INVOICE_SEQ_NO DESC
        ]]>
    </query>
    
    <query name="SEL_LIST_SLIP_NO">
        <![CDATA[  
            SELECT 
                   A.STR_CD
                 , DPS.FN_GET_STORE_NAME(A.STR_CD)                      AS STR_NM
                 , A.INVOICE_YM
                 , A.INVOICE_SEQ_NO
                 , A.INVOICE_DT
                 , A.INVOICE_NO
                 , A.STR_CD || A.OFFER_YM || LPAD(A.OFFER_SEQ_NO,5,'0') AS OFFER_NO
                 , A.OFFER_SHEET_NO
                 , A.PUMBUN_CD
                 , DPS.FN_GET_PUMBUN_NAME(A.PUMBUN_CD)                  AS PUMBUN_NM
                 , A.VEN_CD
                 , DPS.FN_GET_VENDOR_NAME(A.VEN_CD)                     AS VEN_NM
                 , C.SLIP_PROC_STAT
                 , COM.FN_GET_COMM_NAME('D', 'P207', C.SLIP_PROC_STAT)  AS SLIP_PROC_STAT_NM
                 , B.CLOSE_FLAG
                 , D.STYLE_TYPE
              FROM DPS.PO_INVMST A
                 , DPS.PO_OFFMST B
                 , DPS.PO_SLPMST C
                 , DPS.PC_PBNMST D
             WHERE A.STR_CD       = B.STR_CD
               AND A.STR_CD       = C.STR_CD
               AND A.SLIP_NO      = C.SLIP_NO
               AND A.OFFER_YM     = B.OFFER_YM
               AND A.OFFER_SEQ_NO = B.OFFER_SEQ_NO
               AND A.PUMBUN_CD    = D.PUMBUN_CD
               AND A.STR_CD       = ?
               AND C.SLIP_NO      = ?
               AND EXISTS ( SELECT MYORG.USER_ID
                                FROM COM.V_MYORG MYORG
                               WHERE MYORG.STR_CD      = A.STR_CD
                                 AND MYORG.PUMBUN_CD   = A.PUMBUN_CD
                                 AND MYORG.USER_ID     = ?
                                 AND ROWNUM            = 1
                                 AND MYORG.ORG_FLAG    = ?
                          )
             ORDER BY A.STR_CD DESC, A.INVOICE_DT DESC, A.INVOICE_SEQ_NO DESC
        ]]>
    </query>

    <!-- INVOICE 마스터 조회 -->
    <query name="SEL_MASTER">
        <![CDATA[
            SELECT 
                   A.STR_CD
                 , A.INVOICE_YM
                 , A.INVOICE_SEQ_NO
                 , A.INVOICE_DT         AS OFFER_DT
                 , A.OFFER_YM
                 , A.OFFER_SEQ_NO
                 , A.OFFER_SHEET_NO    /* OFFER NO */
                 , A.INVOICE_NO
                 , A.INVOICE_DT
                 , B.PUMBUN_CD
                 , B.VEN_CD
                 , A.BUYER_CD
                 , DPS.FN_GET_BUYER_NAME(A.BUYER_CD) AS BUYER_NM
                 , A.PRC_COND
                 , A.PAYMENT_COND
                 , A.PAYMENT_DTL_COND
                 , A.IMPORT_COUNTRY
                 , A.SHIP_PORT
                 , A.ARRI_PORT
                 , A.LC_DATE
                 , A.LC_NO
                 , A.ETD
                 , A.ETA
                 , A.CURRENCY_CD
                 , A.EXC_APP_DT
                 , A.EXC_RATE
                 , A.PACKING_CHARGE
                 , A.NCV
                 , A.BL_NO
                 , A.ENTRY_DT
                 , A.IMPORT_NO
                 , A.SLIP_NO
                 , A.DELI_DT
                 , A.PRC_APP_DT
                 , A.CHK_DT
                 , A.INVOICE_TOT_QTY
                 , A.INVOICE_TOT_AMT
                 , A.INVOICE_WON_TOT_AMT
                 , A.SALE_TOT_AMT
                 , A.REMARK
                 , TO_CHAR(A.REG_DATE, 'YYYYMMDD')   AS REG_DATE
                 , B.PUMBUN_NAME
                 , B.SKU_TYPE
                 , COM.FN_GET_COMM_NAME('D', 'P015', B.SKU_TYPE) AS SKU_TYPE_NM
                 , B.BIZ_TYPE
                 , COM.FN_GET_COMM_NAME('D', 'P002', B.BIZ_TYPE) AS BIZ_TYPE_NM
                 , B.TAX_FLAG
                 , COM.FN_GET_COMM_NAME('D', 'P004', B.TAX_FLAG) AS TAX_FLAG_NM
                 , B.VEN_NAME
                 , A.GAP_RATE
                 , A.GAP_TOT_AMT
                 , C.SLIP_PROC_STAT
                 , COM.FN_GET_COMM_NAME('D', 'P207', C.SLIP_PROC_STAT)  AS SLIP_PROC_STAT_NM
              FROM DPS.PO_INVMST A,
                   (
                       SELECT PBN.PUMBUN_CD
                            , PBN.PUMBUN_NAME
                            , PBN.SKU_TYPE
                            , PBN.BIZ_TYPE
                            , PBN.TAX_FLAG
                            , PBN.VEN_CD
                            , VEN.VEN_NAME
                         FROM DPS.PC_PBNMST   PBN
                            , DPS.PC_VENMST   VEN
                        WHERE PBN.VEN_CD    = VEN.VEN_CD
                   ) B
                 , DPS.PO_SLPMST C
             WHERE A.PUMBUN_CD      = B.PUMBUN_CD
               AND A.STR_CD         = C.STR_cD
               AND A.SLIP_NO        = C.SLIP_NO
			   AND A.STR_CD         = ?
			   AND A.INVOICE_YM     = ?
			   AND A.INVOICE_SEQ_NO = ?
        ]]>
    </query> 

    <!-- OFFER SHEET 디테일 조회 -->
    <query name="SEL_DETAIL">
        <![CDATA[
            SELECT 'F'                    AS CHECK1
                 , A.STR_CD
                 , A.INVOICE_YM
                 , A.INVOICE_SEQ_NO
                 , A.INVOICE_DTL_SEQ_NO
                 , A.SKU_CD
                 , DPS.FN_GET_SKU_NAME(A.SKU_CD) AS SKU_NM
                 , A.STYLE_CD
                 , A.COLOR_CD
                 , A.SIZE_CD
                 , B.MODEL_NO
                 , B.SALE_UNIT_CD                                     AS  ORD_UNIT_CD
                 , COM.FN_GET_COMM_NAME('D', 'P013', B.SALE_UNIT_CD)  AS  ORD_UNIT_NM
                 , A.INVOICE_QTY
                 , A.INVOICE_UNIT_AMT
                 , A.INVOICE_AMT
                 , A.INVOICE_KOR_UNIT_AMT
                 , A.INVOICE_KOR_AMT
                 , A.SALE_PRC
                 , A.SALE_AMT
                 , A.GAP_RATE
                 , A.GAP_AMT
                 , A.PUMMOK_CD
              FROM DPS.PO_INVDTL A
                 , DPS.PC_SKUMST B
             WHERE A.SKU_CD = B.SKU_CD
               AND A.STR_CD = ?
               AND A.INVOICE_YM = ?
               AND A.INVOICE_SEQ_NO = ?
        ]]>
    </query>  
    
    <!-- INVOICE_SEQ_NO 생성 -->
    <query name="SEL_INVOICE_SEQ_NO">
        <![CDATA[
            SELECT LPAD(NVL(DPS.SQ_POINVOICESEQ.NEXTVAL,0)+1,5,'0')  INVOICE_SEQ_NO
              FROM DUAL
        ]]>
    </query>
    
    <!-- SLIP_NO 생성 -->
    <query name="SEL_SLIP_NO">
        <![CDATA[
            SELECT DPS.FN_GET_SLIPNO(?, ?, ?) AS SLIP_NO
              FROM DUAL  
        ]]>
    </query>

    <!-- INVOICE  마스터 저장 -->
    <query name="INS_MASTER">
        <![CDATA[
			INSERT INTO DPS.PO_INVMST (
			                          STR_CD
			                        , INVOICE_YM
			                        , INVOICE_SEQ_NO
			                        , OFFER_YM
			                        , OFFER_SEQ_NO
			                        , OFFER_SHEET_NO
			                        , INVOICE_NO
			                        , INVOICE_DT
			                        , PUMBUN_CD
			                        , VEN_CD
			                        , BUYER_CD
			                        , PRC_COND
			                        , PAYMENT_COND
			                        , PAYMENT_DTL_COND
			                        , IMPORT_COUNTRY
			                        , SHIP_PORT
			                        , ARRI_PORT
			                        , LC_DATE
			                        , LC_NO
			                        , ETD
			                        , ETA
			                        , CURRENCY_CD
			                        , EXC_APP_DT
			                        , EXC_RATE
			                        , PACKING_CHARGE
			                        , NCV
			                        , BL_NO
			                        , ENTRY_DT
			                        , IMPORT_NO
			                        , SLIP_NO
			                        , DELI_DT
			                        , PRC_APP_DT
			                        , CHK_DT
			                        , INVOICE_TOT_QTY
			                        , INVOICE_TOT_AMT
			                        , INVOICE_WON_TOT_AMT
			                        , SALE_TOT_AMT          
                                    , REMARK
                                    , BIZ_TYPE
                                    , TAX_FLAG
                                    , GAP_RATE
                                    , GAP_TOT_AMT
			                        , REG_DATE
			                        , REG_ID
			                        , MOD_DATE
			                        , MOD_ID
			                          )
			                   VALUES (
			                          ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
                                    , ?
                                    , ?
                                    , ?
                                    , ?
                                    , ?
                                    , ?
                                    , ?
                                    , ?
			                        , ?
			                        , SYSDATE
			                        , ?
			                        , SYSDATE  
			                        , ?                 
			                          )
        ]]>
    </query>  
    
    <!-- INVOICE 마스터 수정 -->
    <query name="UPD_MASTER">
        <![CDATA[
			UPDATE DPS.PO_INVMST
			   SET
			       OFFER_YM       = ?
			     , OFFER_SHEET_NO = ?
			     , INVOICE_NO     = ?
			     , INVOICE_DT     = ?
			     , PUMBUN_CD      = ?
			     , VEN_CD         = ?
			     , BUYER_CD       = ?
			     , PRC_COND       = ?
			     , PAYMENT_COND   = ?
			     , PAYMENT_DTL_COND = ?
			     , IMPORT_COUNTRY = ?
			     , SHIP_PORT      = ?
			     , ARRI_PORT      = ?
			     , LC_DATE        = ?
			     , LC_NO          = ?
			     , ETD            = ?
			     , ETA            = ?
			     , CURRENCY_CD    = ?
			     , EXC_APP_DT     = ?
			     , EXC_RATE       = ?
			     , PACKING_CHARGE = ?
			     , NCV            = ?
			     , BL_NO          = ?
			     , ENTRY_DT       = ?
			     , IMPORT_NO      = ?
			     , DELI_DT        = ?
			     , PRC_APP_DT     = ?
			     , CHK_DT         = ?
			     , INVOICE_TOT_QTY     = ?
			     , INVOICE_TOT_AMT     = ?
			     , INVOICE_WON_TOT_AMT = ?
			     , SALE_TOT_AMT   = ?        
                 , REMARK         = ?
                 , BIZ_TYPE       = ?
                 , TAX_FLAG       = ?
                 , GAP_RATE       = ?
                 , GAP_TOT_AMT    = ?
			     , MOD_DATE       = SYSDATE
			     , MOD_ID         = ?
			 WHERE STR_CD         = ?
			   AND INVOICE_YM     = ?
			   AND INVOICE_SEQ_NO = ?
        ]]>
    </query>  
    
    <!-- INVOICE 마스터 삭제 -->
    <query name="DEL_MASTER">
        <![CDATA[
            DELETE DPS.PO_INVMST
             WHERE STR_CD             = ?
               AND INVOICE_YM         = ?
               AND INVOICE_SEQ_NO     = ?
        ]]>
    </query>   
    
    <!-- INVOICE  마스터 연관 디테일 삭제 -->
    <query name="DEL_ALL">
        <![CDATA[
            DELETE DPS.PO_INVDTL
             WHERE STR_CD             = ?
               AND INVOICE_YM         = ?
               AND INVOICE_SEQ_NO     = ?
        ]]>
    </query>
    
    <!-- 디테일 상세번호 생성 -->
    <query name="SEL_INVOICE_DTL_SEQ_NO">
        <![CDATA[
            SELECT NVL(MAX(INVOICE_DTL_SEQ_NO),0)+1 INVOICE_DTL_SEQ_NO
              FROM DPS.PO_INVDTL
             WHERE STR_CD         = ?
               AND INVOICE_YM     = ?
               AND INVOICE_SEQ_NO = ?
        ]]>
    </query>

    <!-- INVOICE 디테일 저장 -->
    <query name="INS_DETAIL">
        <![CDATA[
			INSERT INTO DPS.PO_INVDTL (
			                          STR_CD
			                        , INVOICE_YM
			                        , INVOICE_SEQ_NO
			                        , INVOICE_DTL_SEQ_NO
			                        , SKU_CD
			                        , STYLE_CD
			                        , COLOR_CD
			                        , SIZE_CD
			                        , ORD_UNIT_CD
			                        , INVOICE_QTY
			                        , INVOICE_UNIT_AMT
			                        , INVOICE_AMT
			                        , INVOICE_KOR_UNIT_AMT
			                        , INVOICE_KOR_AMT
			                        , SALE_PRC
			                        , SALE_AMT
                                    , GAP_RATE
                                    , PUMMOK_CD
                                    , GAP_AMT
			                        , REG_DATE
			                        , REG_ID
			                        , MOD_DATE
			                        , MOD_ID
			                          )
			                   VALUES (
			                          ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
			                        , ?
                                    , ?
                                    , ?
                                    , ?
                                    , ?
			                        , SYSDATE
			                        , ?
			                        , SYSDATE
			                        , ?
			                          )
        ]]>
    </query>    
    
    <!-- INVOICE 디테일 수정 -->
    <query name="UPD_DETAIL">
        <![CDATA[
			UPDATE DPS.PO_INVDTL
			  SET 
			      SKU_CD                = ?
			    , STYLE_CD              = ?
			    , COLOR_CD              = ?
			    , SIZE_CD               = ?
			    , ORD_UNIT_CD           = ?
			    , INVOICE_QTY           = ?
			    , INVOICE_UNIT_AMT      = ?
			    , INVOICE_AMT           = ?
			    , INVOICE_KOR_UNIT_AMT  = ?
			    , INVOICE_KOR_AMT       = ?
			    , SALE_PRC              = ?
			    , SALE_AMT              = ?
                , GAP_RATE              = ?
                , PUMMOK_CD             = ?
                , GAP_AMT               = ?
			    , MOD_DATE              = SYSDATE
			    , MOD_ID                = ?
			WHERE STR_CD                = ?
			  AND INVOICE_YM            = ?
			  AND INVOICE_SEQ_NO        = ?
			  AND INVOICE_DTL_SEQ_NO    = ?
        ]]>
    </query>  
    
    <!-- INVOICE 디테일 삭제 -->
    <query name="DEL_DETAIL">
        <![CDATA[
            DELETE DPS.PO_INVDTL
             WHERE STR_CD             = ?
               AND INVOICE_YM         = ?
               AND INVOICE_SEQ_NO     = ?
               AND INVOICE_DTL_SEQ_NO = ?
        ]]>
    </query>      
    
    <!-- ORDER NO SQL -->
    <query name="SEL_SKU_INFO">
        <![CDATA[                                        
			SELECT A.SALE_PRC
			     , A.MODEL_NO
			     , A.PUMMOK_CD
			     , A.STYLE_CD
			     , A.COLOR_CD
			     , A.SIZE_CD
			     , B.SKU_CD
			  FROM (
				       SELECT A.STR_CD
				            , A.SKU_CD
				            , A.SALE_PRC
				            , B.MODEL_NO
				            , B.PUMMOK_CD
				            , B.STYLE_CD
				            , B.COLOR_CD
				            , B.SIZE_CD 
				         FROM DPS.PC_STRSKUPRCMST A 
				            , DPS.PC_SKUMST B
				        WHERE A.SKU_CD = B.SKU_CD
				          AND ? BETWEEN A.APP_S_DT AND A.APP_E_DT
				          AND A.EVENT_CD = '00000000000'
			       ) A            
			     , (
				       SELECT D.STR_CD
				            , D.SKU_CD 
				         fROM DPS.PO_OFFMST C
				            , DPS.PO_OFFDTL D
				        WHERE C.STR_CD = D.STR_CD
				          AND C.OFFER_YM = D.OFFER_YM
				          AND C.OFFER_SEQ_NO = D.OFFER_SEQ_NO
				          AND C.OFFER_SHEET_NO = ?
			       ) B
			 WHERE A.STR_CD = B.STR_CD
		 	   AND A.STR_CD = ?
		 	   AND A.SKU_CD = B.SKU_CD
			   AND B.SKU_CD = ?
        ]]>
    </query> 
    
    <!-- ORDER NO SQL -->
    <query name="SEL_ORDER_NO">
        <![CDATA[                                        
            SELECT 
                   A.STR_CD
                 , A.STR_CD     AS STR_NM
                 , A.ORDER_DT
                 , A.ORDER_YM
                 , A.ORDER_SEQ_NO
                 , A.STR_CD || A.ORDER_YM || LPAD(A.ORDER_SEQ_NO,5,'0') AS ORDER_NO
                 , B.STYLE_CD
                 , B.COLOR_CD
                 , B.SIZE_CD
                 , B.ORDER_QTY
                 , B.ORDER_AMT
              FROM DPS.PO_ORDMST  A
                 , DPS.PO_ORDDTL  B
             WHERE A.STR_CD       = B.STR_CD
               AND A.ORDER_YM     = B.ORDER_YM
               AND A.ORDER_SEQ_NO = B.ORDER_SEQ_NO
               AND A.STR_CD       = ?
               AND B.SKU_CD       LIKE ? || '%'
               AND A.ORDER_DT     BETWEEN ? AND ?
        ]]>
    </query>

    <!-- 조회 SQL -->
    <query name="SEL_OFFER_INFO">
        <![CDATA[                                        
            SELECT MAX(A.STR_CD)                 AS      STR_CD       
                 , MAX(A.OFFER_YM)               AS      OFFER_YM              
                 , MAX(A.OFFER_SEQ_NO)           AS      OFFER_SEQ_NO             
                 , MAX(A.OFFER_DT)               AS      OFFER_DT  
                 , MAX(A.OFFER_SHEET_NO)         AS      OFFER_SHEET_NO
                 , MAX(A.PUMBUN_CD)              AS      PUMBUN_CD
                 , MAX(C.PUMBUN_NAME)            AS      PUMBUN_NAME
                 , MAX(A.VEN_CD)                 AS      VEN_CD
                 , MAX(D.VEN_NAME)               AS      VEN_NAME
                 , MAX(A.BUYER_CD)               AS      BUYER_CD
                 , MAX(A.PRC_COND)               AS      PRC_COND
                 , MAX(A.SHIPPMENT_CD)           AS      SHIPPMENT_CD
                 , MAX(A.CURRENCY_CD)            AS      CURRENCY_CD
                 , MAX(A.OFFER_TOT_QTY)          AS      OFFER_TOT_QTY
                 , MAX(A.OFFER_TOT_AMT)          AS      OFFER_TOT_AMT
                 , MAX(A.PAYMENT_COND)           AS      PAYMENT_COND
                 , MAX(A.PAYMENT_DTL_COND)       AS      PAYMENT_DTL_COND       
                 , MAX(A.SHIP_PORT)              AS      SHIP_PORT
                 , MAX(A.ARRI_PORT)              AS      ARRI_PORT
                 , MAX(A.LC_DATE)                AS      LC_DATE
                 , MAX(A.LC_NO)                  AS      LC_NO
                 , MAX(A.LC_EFFECTIVE_DT)        AS      LC_EFFECTIVE_DT
                 , MAX(A.LC_OPEN_BANK)           AS      LC_OPEN_BANK
                 , MAX(A.VENDOR_INFO)            AS      VENDOR_INFO
                 , MAX(A.IMPORT_COUNTRY)         AS      IMPORT_COUNTRY
                 , MAX(A.ATTN)                   AS      ATTN
                 , MAX(A.MESSRS)                 AS      MESSRS
                 , MAX(A.VALIDITY)               AS      VALIDITY
                 , MAX(A.SHIPPMENT)              AS      SHIPPMENT
                 , MAX(A.PACKING)                AS      PACKING
                 , MAX(A.INSURANCE)              AS      INSURANCE
                 , MAX(A.PRICE)                  AS      PRICE
                 , MAX(A.ORIGIN)                 AS      ORIGIN
                 , MAX(A.INSPECTION)             AS      INSPECTION
                 , MAX(A.DELIVERY)               AS      DELIVERY
                 , MAX(A.BL_NO)                  AS      BL_NO
                 , MAX(A.BL_DT)                  AS      BL_DT
                 , MAX(A.PAYMENT)                AS      PAYMENT
                 , MAX(A.COMMODITY)              AS      COMMODITY
                 , MAX(A.PACKING_CHARGE)         AS      PACKING_CHARGE
                 , MAX(A.NCV)                    AS      NCV
                 , MAX(A.SHIPPER)                AS      SHIPPER
                 , MAX(A.EXC_APP_DT)             AS      EXC_APP_DT
                 , MAX(A.EXC_RATE)               AS      EXC_RATE
                 , MAX(A.CLOSE_FLAG)             AS      CLOSE_FLAG
                 , MAX(A.CLOSE_DT)               AS      CLOSE_DT
                 , MAX(A.EXPNC_CLOSE_FLAG)       AS      EXPNC_CLOSE_FLAG
                 , MAX(A.COST_CLOSE_FLAG)        AS      COST_CLOSE_FLAG
                 , B.SKU_CD          
                 , C.SKU_TYPE     
                 , C.STYLE_TYPE     
              FROM DPS.PO_OFFMST A
                 , DPS.PO_OFFDTL B
                 , DPS.PC_STRPBN C
                 , DPS.PC_STRVENMST D
             WHERE A.STR_CD          =    C.STR_CD
               AND A.STR_CD          =    B.STR_CD
               AND A.OFFER_YM        =    B.OFFER_YM
               AND A.OFFER_SEQ_NO    =    B.OFFER_SEQ_NO
               AND A.PUMBUN_CD       =    C.PUMBUN_CD
               AND A.STR_CD          =    D.STR_CD
               AND A.VEN_CD          =    D.VEN_CD        
               AND A.STR_CD          =    ?     
               AND A.OFFER_SHEET_NO  =    ?
          GROUP BY B.SKU_CD          
                 , C.SKU_TYPE  
                 , C.STYLE_TYPE    
        ]]>
    </query>

    <!-- INVOICE NO 조회 SQL -->
    <query name="SEL_INVOICE_NO_INFO">
        <![CDATA[                                        
            SELECT INVOICE_NO
              FROM DPS.PO_INVMST
             WHERE STR_CD     = ?
               AND INVOICE_NO = ?
        ]]>
    </query>

    <!-- 조회 SQL -->
    <query name="SEL_OFFER_DTL_SKU_INFO">
        <![CDATA[                                        
			SELECT B.SKU_CD
			  FROM DPS.PO_OFFMST A
			     , DPS.PO_OFFDTL B
			 WHERE A.STR_CD = B.STR_CD
			   AND A.STR_CD = ?
			   AND A.OFFER_YM = B.OFFER_YM
			   AND A.OFFER_SEQ_NO = B.OFFER_SEQ_NO
			   AND A.OFFER_SHEET_NO = ?
        ]]>
    </query>
    
    
    <!-- 단품 가격-->
    <query name="SEL_SKU_SALE_PRC">
        <![CDATA[
            SELECT SKU.SKU_CD
                 , SKU.SKU_NAME         AS SKU_NM
                 , NVL(PRC.SALE_PRC, 0) AS SALE_PRC
                 , SKU.PUMMOK_CD        
                 , SKU.STYLE_CD
                 , SKU.COLOR_CD
                 , SKU.SIZE_CD
                 , SKU.MODEL_NO
                 , SKU.SALE_UNIT_CD
                 , COM.FN_GET_COMM_NAME('D', 'P013',  SKU.SALE_UNIT_CD)  AS  SALE_UNIT_NM
                 , OFD.OFFER_QTY
                 , OFD.OFFER_UNIT_AMT
                 , OFD.OFFER_AMT
                 , NVL(OFM.EXC_RATE,0) AS EXC_RATE
                 , PBN.TAX_FLAG
                 , STV.RUND_FLAG
                 , DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, OFD.OFFER_UNIT_AMT * NVL(TO_NUMBER(?),0), 0) AS COST_PRC
                 , OFD.OFFER_QTY * DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, OFD.OFFER_UNIT_AMT * NVL(TO_NUMBER(?),0), 0) AS COST_AMT
                 , OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0) AS SALE_AMT   
                 , CASE WHEN (OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0)) = 0 THEN 0
                        ELSE DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, 
                                 CASE WHEN PBN.TAX_FLAG= '1' THEN ((((OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0))/1.1) 
                                          - OFD.OFFER_QTY * DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, OFD.OFFER_UNIT_AMT * NVL(TO_NUMBER(?),0), 0))
                                          /((OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0))/1.1) * 100)
                                      ELSE (((OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0))
                                          - OFD.OFFER_QTY * DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, OFD.OFFER_UNIT_AMT * NVL(TO_NUMBER(?),0), 0))
                                          /(OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0)) * 100)
                                      END, 2)
                        END AS GAP_RATE
                 , DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, CASE WHEN PBN.TAX_FLAG= '1' THEN (((OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0))/1.1) 
                          - OFD.OFFER_QTY * DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, OFD.OFFER_UNIT_AMT * NVL(TO_NUMBER(?),0), 0))
                       ELSE ((OFD.OFFER_QTY * NVL(PRC.SALE_PRC, 0))
                          - OFD.OFFER_QTY * DPS.FN_GET_ROUND_PROC(STV.RUND_FLAG, OFD.OFFER_UNIT_AMT * NVL(TO_NUMBER(?),0), 0))
                       END, 0) AS GAP_AMT
              FROM DPS.PC_SKUMST SKU
                 , DPS.PC_STRSKUMST STS
                 , (
                    SELECT STR_CD
                         , SKU_CD
                         , SALE_PRC
                      FROM DPS.PC_STRSKUPRCMST
                     WHERE STR_CD   = ?
                       AND SKU_CD   = ?
                       AND EVENT_CD = '00000000000'
                       AND ? BETWEEN APP_S_DT AND APP_E_DT
                   ) PRC
                 , DPS.PO_OFFMST OFM
                 , (
                    SELECT MAX(A.STR_CD)           AS STR_CD
                         , MAX(A.OFFER_YM)         AS OFFER_YM
                         , MAX(A.OFFER_SEQ_NO)     AS OFFER_SEQ_NO
                         , A.SKU_CD      
                         , SUM(A.OFFER_QTY)        AS OFFER_QTY
                         , SUM(A.OFFER_UNIT_AMT)   AS OFFER_UNIT_AMT
                         , SUM(A.OFFER_AMT)        AS OFFER_AMT
                      FROM DPS.PO_OFFDTL A
                     WHERE A.STR_CD       = ?
                       AND A.OFFER_YM     = ?
                       AND A.OFFER_SEQ_NO = ?
                       AND A.SKU_CD       = ?
                     GROUP BY A.SKU_CD
                   ) OFD
                 , DPS.PC_STRPBN STP
                 , DPS.PC_PBNMST PBN
                 , DPS.PC_STRVENMST STV
             WHERE STS.STR_CD         = ?
               AND STS.SKU_CD         = ?
               AND OFM.STR_CD         = ?
               AND OFM.OFFER_YM       = ?
               AND OFM.OFFER_SEQ_NO   = ?
               AND OFD.STR_CD         = OFM.STR_CD
               AND OFD.OFFER_YM       = OFM.OFFER_YM
               AND OFD.OFFER_SEQ_NO   = OFM.OFFER_SEQ_NO 
               AND OFD.STR_CD         = STS.STR_CD
               AND OFD.SKU_CD         = STS.SKU_CD
               AND SKU.SKU_CD         = STS.SKU_CD
               AND STP.STR_CD         = STS.STR_CD
               AND STP.PUMBUN_CD      = STS.PUMBUN_CD
               AND PBN.PUMBUN_CD      = STS.PUMBUN_CD
               AND STV.STR_CD         = STP.STR_CD
               AND STV.VEN_CD         = STP.VEN_CD
               AND PRC.STR_CD      (+)= STS.STR_CD
               AND PRC.SKU_CD      (+)= STS.SKU_CD
        ]]>
    </query>     
    
    <!-- INVOICE 상태값-->
    <query name="CHK_INVOICE_STAT">
        <![CDATA[  
            SELECT A.OFFER_SHEET_NO
                 , C.SLIP_PROC_STAT
                 , B.CLOSE_FLAG
              FROM DPS.PO_INVMST A
                 , DPS.PO_OFFMST B
                 , DPS.PO_SLPMST C
             WHERE A.STR_CD         = B.STR_CD
               AND A.STR_CD         = C.STR_CD
               AND A.SLIP_NO        = C.SLIP_NO
               AND A.OFFER_YM       = B.OFFER_YM
               AND A.OFFER_SEQ_NO   = B.OFFER_SEQ_NO
               AND A.STR_CD         = ?
               AND A.OFFER_SHEET_NO = ?
        ]]>
    </query>
</service>