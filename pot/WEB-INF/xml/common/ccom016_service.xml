<?xml version="1.0" encoding="euc-kr"?>
<!-- XML 버전 1.0을 사용하며 encoding 타입은 ‘euc-kr’로 한다.-->
<!--
 * 작 성 자 : 정진영
 * 회 사 명 : FKSS
 * 작 성 일 : 2010.02.17
 * 변 경 일  :
 * 변경내용 :
 * 개     요  : 점별 협력사코드 공통 XML
 -->
<service name="/ccom016.cc">	

    <!-- 코드/명 조회 -->
    <gauce name="H_VENMST">
      <column colName="SEL"            colType="TB_STRING" size="1"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="VEN_CD"         colType="TB_STRING" size="6"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="VEN_NAME"       colType="TB_STRING" size="40"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="VEN_SHORT_NAME" colType="TB_STRING" size="20"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="COMP_NO"        colType="TB_STRING" size="10"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="REP_VEN_CD"     colType="TB_STRING" size="6"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="STR_CD"         colType="TB_STRING" size="2"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="PAY_CYC"        colType="TB_STRING" size="1"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="PAY_WAY"        colType="TB_STRING" size="2"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="RUND_FLAG"      colType="TB_STRING" size="1"  dec="0" keyType="TB_NORMAL"  roundMode="" />
      <column colName="PAY_HOLI_FLAG"  colType="TB_STRING" size="1"  dec="0" keyType="TB_NORMAL"  roundMode="" />
    </gauce>  
    
    <gauce name="H_VENMST_INFO">
        <column colName="VEN_CD"            colType="TB_STRING"  size="6"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_NAME"          colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="VEN_SHORT_NAME"    colType="TB_STRING"  size="20" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUY_SALE_FLAG"     colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_TYPE"          colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_FLAG"          colType="TB_STRING"  size="2"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_VEN_CD"        colType="TB_STRING"  size="6"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BUY_ACC_VEN_CD"    colType="TB_STRING"  size="10" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="SALE_ACC_VEN_CD"   colType="TB_STRING"  size="10" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COMP_FLAG"         colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ETAX_ISSUE_FLAG"   colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="RVS_ISSUE_FLAG"    colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="OCOMP_TAX_ID"      colType="TB_STRING"  size="15" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="EDI_YN"            colType="TB_STRING"  size="1"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COMP_NO"           colType="TB_STRING"  size="10" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="CORP_NO"           colType="TB_STRING"  size="13" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="COMP_NAME"         colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_STAT"          colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_CAT"           colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="REP_NAME"          colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="POST_NO"           colType="TB_STRING"  size="6"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="POST_SEQ"          colType="TB_INT"     size="5"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="ADDR"              colType="TB_STRING"  size="80" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="DTL_ADDR"          colType="TB_STRING"  size="40" dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PHONE1_NO"         colType="TB_STRING"  size="4"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PHONE2_NO"         colType="TB_STRING"  size="4"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="PHONE3_NO"         colType="TB_STRING"  size="4"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FAX1_NO"           colType="TB_STRING"  size="4"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FAX2_NO"           colType="TB_STRING"  size="4"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="FAX3_NO"           colType="TB_STRING"  size="4"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_S_DT"          colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
        <column colName="BIZ_E_DT"          colType="TB_STRING"  size="8"  dec="0" keyType="TB_NORMAL" roundMode="ROUND" />
    </gauce>
    <!-- 협력사코드조회 SQL -->
    <query name="SEL_VENMST">
        <![CDATA[                                        
            SELECT 'F'        AS SEL
                 , VEN.VEN_CD
                 , VEN.VEN_NAME
                 , VEN.VEN_SHORT_NAME
                 , VEN.COMP_NO
                 , VEN.REP_VEN_CD
                 , STR.STR_CD
                 , STR.PAY_CYC
                 , STR.PAY_WAY
                 , STR.RUND_FLAG
                 , STR.PAY_HOLI_FLAG
              FROM DPS.PC_VENMST    VEN
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_NOT_STR_CD">
        <![CDATA[
                 , (SELECT null AS STR_CD  , null AS PAY_CYC  , null AS PAY_WAY  , null AS RUND_FLAG  , null AS PAY_HOLI_FLAG
                      FROM DUAL
                   ) STR
             WHERE 1=1
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_STR_CD">
        <![CDATA[
                 , DPS.PC_STRVENMST STR
             WHERE VEN.VEN_CD = STR.VEN_CD(+)
               AND STR.STR_CD           = ?
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_VEN_CD">
        <![CDATA[
               AND VEN.VEN_CD   = ?
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_LIKE_VEN_CD">
        <![CDATA[
               AND VEN.VEN_CD   LIKE ?||'%'
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_VEN_NAME">
        <![CDATA[
               AND VEN.VEN_NAME LIKE '%'||?||'%'
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_USE_YN">
        <![CDATA[
               AND VEN.USE_YN           = ?
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_PUMBUN_TYPE">
        <![CDATA[
              AND EXISTS ( SELECT PBN.PUMBUN_TYPE
                             FROM DPS.PC_PBNMST PBN
                            WHERE PBN.PUMBUN_TYPE = ?
                              AND PBN.VEN_CD      = VEN.VEN_CD     
                          )
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_BIZ_TYPE">
        <![CDATA[
               AND VEN.BIZ_TYPE           = ?
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_MR_ONLY">
        <![CDATA[
               AND VEN.BIZ_TYPE           IN  ('3','4','5')
               AND STR.POS_CAL_FLAG       IN  ('1','3')
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_BUY_SALE_FLAG">
        <![CDATA[
               AND VEN.BUY_SALE_FLAG           = ?
        ]]>
    </query>
    <query name="SEL_VENMST_WHERE_BIZ_FLAG">
        <![CDATA[
               AND VEN.BIZ_FLAG           = ?
        ]]>
    </query>
    
    <query name="SEL_VENMST_WHERE_CNTR_TYPE">
        <![CDATA[
               AND EXISTS ( SELECT CNT.VEN_CD
                             FROM MSS.MR_CNTRMST CNT
                            WHERE CNT.CNTR_ID     = MSS.FN_GET_CNTR_ID_M(VEN.VEN_CD, ?, ?)
                           )
        ]]>
    </query>
    
    <query name="SEL_VENMST_ORDER">
        <![CDATA[
             ORDER BY VEN.VEN_CD
        ]]>
    </query>
    
    
    <!-- 협력사 정보를 조회 -->
    <query name="SEL_VENMST_INFO">
        <![CDATA[
            SELECT VEN_CD
                 , VEN_NAME
                 , VEN_SHORT_NAME
                 , BUY_SALE_FLAG
                 , BIZ_TYPE
                 , BIZ_FLAG
                 , REP_VEN_CD
                 , BUY_ACC_VEN_CD
                 , SALE_ACC_VEN_CD
                 , COMP_FLAG
                 , ETAX_ISSUE_FLAG
                 , RVS_ISSUE_FLAG
                 , OCOMP_TAX_ID
                 , EDI_YN
                 , COMP_NO
                 , CORP_NO
                 , COMP_NAME
                 , BIZ_STAT
                 , BIZ_CAT
                 , REP_NAME
                 , POST_NO
                 , POST_SEQ
                 , ADDR
                 , DTL_ADDR
                 , PHONE1_NO
                 , PHONE2_NO
                 , PHONE3_NO
                 , FAX1_NO
                 , FAX2_NO
                 , FAX3_NO
                 , BIZ_S_DT
                 , BIZ_E_DT
              FROM DPS.PC_VENMST 
             WHERE VEN_CD = ?
               AND USE_YN = 'Y'
        ]]>
    </query>
    
</service>